{"ast":null,"code":"import { PaperWallet } from '@thirdweb-dev/wallets';\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { useCreateWalletInstance, useSetConnectionStatus, useSetConnectedWallet, useWalletContext, useConnectionStatus } from '@thirdweb-dev/react-core';\nimport { E as fadeInAnimation, A as Input, f as fontSize, s as spacing, o as media, C as Container, B as Button, i as iconSize, S as Spacer, T as TextDivider, M as ModalHeader, b as Text, c as Spinner, L as Line, a as ModalTitle, r as reservedScreens, W as WalletEntryButton } from './formElements-49d2196e.browser.esm.js';\nimport { jsxs, jsx, Fragment } from 'react/jsx-runtime';\nimport { I as InputSelectionUI } from './InputSelectionUI-6fc61f90.browser.esm.js';\nimport { u as useScreenContext } from './useWalletConnect-8a1a7bf9.browser.esm.js';\nimport { e as emailIcon } from './Tooltip-c0cbeb52.browser.esm.js';\nconst GoogleIcon = props => {\n  return /*#__PURE__*/jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: props.size,\n    viewBox: \"0 0 24 24\",\n    width: props.size,\n    children: [/*#__PURE__*/jsx(\"path\", {\n      d: \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\",\n      fill: \"#4285F4\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\",\n      fill: \"#34A853\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\",\n      fill: \"#FBBC05\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\",\n      fill: \"#EA4335\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M1 1h22v22H1z\",\n      fill: \"none\"\n    })]\n  });\n};\nfunction openGoogleSignInWindow() {\n  const win = window.open(\"\", undefined, \"width=350, height=500\");\n  if (win) {\n    win.document.title = \"Sign In - Google Accounts\";\n    win.document.body.innerHTML = spinnerWindowHtml;\n  }\n  return win;\n}\nconst spinnerWindowHtml = `\n<svg class=\"loader\" viewBox=\"0 0 50 50\">\n  <circle\n    cx=\"25\"\n    cy=\"25\"\n    r=\"20\"\n    fill=\"none\"\n    stroke=\"#000\"\n    stroke-width=\"4\"\n  />\n</svg>\n\n<style>\n  body,\n  html {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .loader {\n    width: 15vw;\n    height: 15vw;\n    animation: spin 2s linear infinite;\n  }\n\n  .loader circle {\n    animation: loading 1.5s linear infinite;\n  }\n\n  @keyframes loading {\n    0% {\n      stroke-dasharray: 1, 150;\n      stroke-dashoffset: 0;\n    }\n    50% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -35;\n    }\n    100% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -124;\n    }\n  }\n\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n</style>\n`;\nconst FadeIn = styled.div`\n  animation: ${fadeInAnimation} 0.15s ease-in;\n`;\nfunction OTPInput(props) {\n  const otp = props.value.split(\"\").map(Number);\n  const setOTP = newOTP => {\n    props.setValue(newOTP.join(\"\"));\n  };\n  const inputToFocusIndex = otp.length;\n  const boxEls = useRef([]);\n  useEffect(() => {\n    if (boxEls.current[inputToFocusIndex]) {\n      requestAnimationFrame(() => {\n        boxEls.current[inputToFocusIndex]?.focus();\n      });\n    }\n  }, [inputToFocusIndex]);\n  return /*#__PURE__*/jsx(Container, {\n    center: \"x\",\n    gap: \"sm\",\n    flex: \"row\",\n    children: new Array(props.digits).fill(null).map((_, i) => {\n      return /*#__PURE__*/jsx(OTPInputBox, {\n        \"data-error\": props.isInvalid,\n        ref: e => boxEls.current[i] = e,\n        value: otp[i] === undefined ? \"\" : otp[i],\n        type: \"number\",\n        variant: \"outline\",\n        onPaste: e => {\n          const pastedData = e.clipboardData.getData(\"text/plain\");\n          const newOTP = pastedData.slice(0, props.digits).split(\"\").filter(n => /[0-9]/.test(n)).map(Number);\n          setOTP(newOTP);\n          e.preventDefault();\n        },\n        onKeyDown: e => {\n          if (e.key === \"Enter\") {\n            if (props.onEnter) {\n              props.onEnter();\n              return;\n            }\n          }\n          if (e.key === \"ArrowLeft\") {\n            if (i === 0) {\n              return;\n            }\n            boxEls.current[i - 1]?.focus();\n            return;\n          }\n          if (e.key === \"ArrowRight\") {\n            if (i === props.digits - 1) {\n              return;\n            }\n            boxEls.current[i + 1]?.focus();\n            return;\n          }\n          if (e.key === \"e\" || e.key === \".\") {\n            e.preventDefault();\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            if (i === 0) {\n              return;\n            }\n            const newOTP = otp.slice(0, -1);\n            setOTP(newOTP);\n          }\n        },\n        onChange: e => {\n          let value = e.target.value;\n          if (value.length > 1) {\n            const lastValue = value[value.length - 1];\n            if (lastValue) {\n              value = lastValue;\n            }\n          }\n          if (!/[0-9]/.test(value) && value !== \"\") {\n            e.preventDefault();\n            return;\n          }\n          const newOTP = [...otp];\n          const index = i > inputToFocusIndex - 1 ? inputToFocusIndex : i;\n          newOTP[index] = Number(value);\n          setOTP(newOTP);\n        }\n      }, i);\n    })\n  });\n}\nconst OTPInputBox = styled(Input)`\n  appearance: none;\n  -webkit-appearance: none;\n  width: 40px;\n  height: 40px;\n  text-align: center;\n  font-size: ${fontSize.md};\n  padding: ${spacing.xs};\n  ${media.mobile} {\n    width: 35px;\n    height: 35px;\n  }\n  &[data-verify-status=\"invalid\"] {\n    color: ${p => p.theme.colors.danger};\n    border-color: ${p => p.theme.colors.danger};\n  }\n`;\nconst PaperFormUI = props => {\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  return /*#__PURE__*/jsxs(\"div\", {\n    children: [props.googleLoginSupported && /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsxs(SocialButton, {\n        variant: \"secondary\",\n        fullWidth: true,\n        onClick: () => {\n          googleLogin();\n          props.onSelect({\n            google: true\n          });\n        },\n        children: [/*#__PURE__*/jsx(GoogleIcon, {\n          size: iconSize.md\n        }), \"Sign in with Google\"]\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      }), /*#__PURE__*/jsx(TextDivider, {\n        children: /*#__PURE__*/jsx(\"span\", {\n          children: \"OR\"\n        })\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      })]\n    }), /*#__PURE__*/jsx(InputSelectionUI, {\n      onSelect: email => props.onSelect({\n        email\n      }),\n      placeholder: \"Enter your email address\",\n      name: \"email\",\n      type: \"email\",\n      errorMessage: _input => {\n        const input = _input.replace(/\\+/g, \"\");\n        const emailRegex = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,})$/g;\n        const isValidEmail = emailRegex.test(input);\n        if (!isValidEmail) {\n          return \"Invalid email address\";\n        }\n      },\n      emptyErrorMessage: \"email address is required\",\n      showOrSeparator: props.showOrSeparator\n    })]\n  });\n};\nconst PaperFormUIScreen = props => {\n  const isCompact = props.modalSize === \"compact\";\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    p: \"lg\",\n    animate: \"fadein\",\n    style: {\n      minHeight: \"250px\"\n    },\n    children: [/*#__PURE__*/jsx(ModalHeader, {\n      onBack: props.onBack,\n      title: \"Sign in\"\n    }), isCompact ? /*#__PURE__*/jsx(Spacer, {\n      y: \"xl\"\n    }) : null, /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      p: isCompact ? undefined : \"lg\",\n      children: /*#__PURE__*/jsx(PaperFormUI, {\n        walletConfig: props.walletConfig,\n        googleLoginSupported: props.googleLoginSupported,\n        onSelect: props.onSelect,\n        showOrSeparator: false\n      })\n    })]\n  });\n};\nconst SocialButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  gap: ${spacing.sm};\n`;\nconst PaperOTPLoginUI = props => {\n  const email = props.selectionData;\n  const [otpInput, setOtpInput] = useState(\"\");\n  const [recoveryCode, setRecoveryCode] = useState(\"\");\n  const {\n    createWalletInstance,\n    setConnectedWallet,\n    setConnectionStatus\n  } = useWalletContext();\n  const [wallet, setWallet] = useState(null);\n  const isWideModal = props.modalSize === \"wide\";\n  const [verifyStatus, setVerifyStatus] = useState(\"idle\");\n  const [sendEmailStatus, setSendEmailStatus] = useState(\"sending\");\n  const recoveryCodeRequired = !!(typeof sendEmailStatus !== \"string\" && sendEmailStatus.recoveryShareManagement !== \"AWS_MANAGED\" && sendEmailStatus.isNewDevice && !sendEmailStatus.isNewUser);\n  const sendEmail = useCallback(async () => {\n    setOtpInput(\"\");\n    setVerifyStatus(\"idle\");\n    setSendEmailStatus(\"sending\");\n    try {\n      const _wallet = createWalletInstance(props.walletConfig);\n      setWallet(_wallet);\n      const _paperSDK = await _wallet.getPaperSDK();\n      const {\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      } = await _paperSDK.auth.sendPaperEmailLoginOtp({\n        email: email\n      });\n      setSendEmailStatus({\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      });\n    } catch (e) {\n      console.error(e);\n      setVerifyStatus(\"idle\");\n      setSendEmailStatus(\"error\");\n    }\n  }, [createWalletInstance, email, props.walletConfig]);\n  const handleSubmit = otp => {\n    if (recoveryCodeRequired && !recoveryCode) {\n      return;\n    }\n    if (typeof sendEmailStatus === \"string\" || otp.length !== 6) {\n      return;\n    }\n    verifyCodes(otp);\n  };\n  const verifyCodes = async otp => {\n    setVerifyStatus(\"idle\");\n    if (!wallet) {\n      return;\n    }\n    try {\n      setVerifyStatus(\"verifying\");\n      setConnectionStatus(\"connecting\");\n      await wallet.connect({\n        email,\n        otp,\n        recoveryCode: recoveryCodeRequired ? recoveryCode : undefined\n      });\n      setConnectedWallet(wallet);\n      setVerifyStatus(\"valid\");\n      props.close();\n    } catch (e) {\n      setVerifyStatus(\"invalid\");\n      console.error(e);\n    }\n  };\n\n  // send email on mount\n  const emailSentOnMount = useRef(false);\n  useEffect(() => {\n    if (!emailSentOnMount.current) {\n      emailSentOnMount.current = true;\n      sendEmail();\n    }\n  }, [sendEmail]);\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    animate: \"fadein\",\n    children: [/*#__PURE__*/jsx(Container, {\n      p: \"lg\",\n      children: /*#__PURE__*/jsx(ModalHeader, {\n        title: \"Sign in\",\n        onBack: props.goBack\n      })\n    }), /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      children: /*#__PURE__*/jsxs(\"form\", {\n        onSubmit: e => {\n          e.preventDefault();\n        },\n        children: [/*#__PURE__*/jsxs(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [!isWideModal && /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Text, {\n            children: \"Enter the OTP sent to\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: email\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          })]\n        }), /*#__PURE__*/jsx(OTPInput, {\n          isInvalid: verifyStatus === \"invalid\",\n          digits: 6,\n          value: otpInput,\n          setValue: value => {\n            setOtpInput(value);\n            setVerifyStatus(\"idle\"); // reset error\n            if (!recoveryCodeRequired) {\n              handleSubmit(value);\n            }\n          },\n          onEnter: () => {\n            handleSubmit(otpInput);\n          }\n        }), recoveryCodeRequired && /*#__PURE__*/jsxs(Container, {\n          px: \"lg\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: \"New device detected\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            multiline: true,\n            style: {\n              maxWidth: \"350px\"\n            },\n            children: [\"Enter the recovery code emailed to you \", /*#__PURE__*/jsx(\"br\", {}), \" when you first signed up\"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Input, {\n            sm: true,\n            autoComplete: \"off\",\n            required: true,\n            \"data-error\": verifyStatus === \"invalid\",\n            id: \"recovery-code\",\n            variant: \"outline\",\n            style: {\n              textAlign: \"center\"\n            },\n            value: recoveryCode,\n            onChange: e => setRecoveryCode(e.target.value),\n            placeholder: \"Enter your recovery code\"\n          })]\n        }), verifyStatus === \"invalid\" && /*#__PURE__*/jsxs(FadeIn, {\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"md\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            color: \"danger\",\n            center: true,\n            children: [\"Invalid OTP \", recoveryCodeRequired ? \"or recovery code\" : \"\"]\n          })]\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), /*#__PURE__*/jsx(Container, {\n          px: isWideModal ? \"xxl\" : \"lg\",\n          children: verifyStatus === \"verifying\" ? /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Container, {\n              flex: \"row\",\n              center: \"x\",\n              animate: \"fadein\",\n              children: /*#__PURE__*/jsx(Spinner, {\n                size: \"lg\",\n                color: \"accentText\"\n              })\n            })\n          }) : /*#__PURE__*/jsx(Container, {\n            animate: \"fadein\",\n            children: /*#__PURE__*/jsx(Button, {\n              onClick: () => handleSubmit(otpInput),\n              variant: \"accent\",\n              type: \"submit\",\n              style: {\n                width: \"100%\"\n              },\n              children: \"Verify\"\n            })\n          }, \"btn-container\")\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), !isWideModal && /*#__PURE__*/jsx(Line, {}), /*#__PURE__*/jsxs(Container, {\n          p: isWideModal ? undefined : \"lg\",\n          children: [sendEmailStatus === \"error\" && /*#__PURE__*/jsxs(Fragment, {\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              center: true,\n              color: \"danger\",\n              children: \"Failed to send OTP\"\n            }), /*#__PURE__*/jsx(Spacer, {\n              y: \"md\"\n            })]\n          }), sendEmailStatus === \"sending\" && /*#__PURE__*/jsxs(Container, {\n            flex: \"row\",\n            center: \"both\",\n            gap: \"xs\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              children: \"Sending OTP\"\n            }), /*#__PURE__*/jsx(Spinner, {\n              size: \"xs\",\n              color: \"secondaryText\"\n            })]\n          }), typeof sendEmailStatus !== \"string\" && /*#__PURE__*/jsx(LinkButton, {\n            onClick: sendEmail,\n            type: \"button\",\n            children: \"Resend OTP\"\n          })]\n        })]\n      })\n    })]\n  });\n};\nconst LinkButton = styled.button`\n  all: unset;\n  color: ${p => p.theme.colors.accentText};\n  font-size: ${fontSize.sm};\n  cursor: pointer;\n  text-align: center;\n  width: 100%;\n  &:hover {\n    color: ${p => p.theme.colors.primaryText};\n  }\n`;\nconst PaperGoogleLogin = props => {\n  const {\n    goBack,\n    modalSize\n  } = props;\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const connectionStatus = useConnectionStatus();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n      props.close();\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  const closeModal = props.close;\n  useEffect(() => {\n    if (connectionStatus === \"connected\") {\n      closeModal();\n    }\n  }, [connectionStatus, closeModal]);\n  return /*#__PURE__*/jsx(Container, {\n    animate: \"fadein\",\n    flex: \"column\",\n    fullHeight: true,\n    children: /*#__PURE__*/jsxs(Container, {\n      flex: \"column\",\n      expand: true,\n      p: \"lg\",\n      style: {\n        paddingBottom: 0\n      },\n      children: [/*#__PURE__*/jsx(ModalHeader, {\n        title: /*#__PURE__*/jsxs(Container, {\n          flex: \"row\",\n          center: \"both\",\n          gap: \"xs\",\n          children: [/*#__PURE__*/jsx(GoogleIcon, {\n            size: iconSize.md\n          }), /*#__PURE__*/jsx(ModalTitle, {\n            children: \" Sign in \"\n          })]\n        }),\n        onBack: goBack\n      }), modalSize === \"compact\" ? /*#__PURE__*/jsx(Spacer, {\n        y: \"xl\"\n      }) : null, /*#__PURE__*/jsxs(Container, {\n        flex: \"column\",\n        center: \"both\",\n        expand: true,\n        style: {\n          textAlign: \"center\",\n          minHeight: \"250px\"\n        },\n        children: [connectionStatus === \"connecting\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            multiline: true,\n            style: {\n              maxWidth: \"250px\"\n            },\n            children: \"Select your Google account in the pop-up\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          }), /*#__PURE__*/jsx(Container, {\n            center: \"x\",\n            flex: \"row\",\n            children: /*#__PURE__*/jsx(Spinner, {\n              size: \"lg\",\n              color: \"accentText\"\n            })\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        }), connectionStatus === \"disconnected\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"danger\",\n            children: \"Failed to sign in\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsxs(Button, {\n            variant: \"primary\",\n            onClick: googleLogin,\n            children: [\" \", \"Retry\", \" \"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        })]\n      })]\n    })\n  });\n};\nconst paperWallet = config => {\n  const defaultRecovery = \"AWS_MANAGED\";\n  return {\n    category: \"socialLogin\",\n    id: PaperWallet.id,\n    recommended: config?.recommended,\n    meta: {\n      ...PaperWallet.meta,\n      name: \"Email\",\n      iconURL: emailIcon\n    },\n    create(options) {\n      return new PaperWallet({\n        ...options,\n        ...config,\n        advancedOptions: {\n          recoveryShareManagement: \"AWS_MANAGED\",\n          ...config?.advancedOptions\n        }\n      });\n    },\n    selectUI(props) {\n      return /*#__PURE__*/jsx(PaperSelectionUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    },\n    connectUI(props) {\n      return /*#__PURE__*/jsx(PaperConnectUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    }\n  };\n};\nconst PaperSelectionUI = props => {\n  const screen = useScreenContext();\n\n  // show the icon + text if\n  // wide -\n  // compact + not main screen (safe/smart wallet list screen)\n  if (props.modalSize === \"wide\" || screen !== reservedScreens.main && props.modalSize === \"compact\") {\n    return /*#__PURE__*/jsx(WalletEntryButton, {\n      walletConfig: props.walletConfig,\n      selectWallet: () => {\n        props.onSelect(undefined);\n      }\n    });\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    children: /*#__PURE__*/jsx(PaperFormUI, {\n      walletConfig: props.walletConfig,\n      googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n      showOrSeparator: props.supportedWallets.length > 1,\n      onSelect: props.onSelect\n    })\n  });\n};\nconst PaperConnectUI = props => {\n  const [loginType, setLoginType] = useState(props.selectionData);\n  if (loginType) {\n    const handleBack = () => {\n      // go back to base screen\n      if (props.modalSize === \"wide\") {\n        setLoginType(undefined);\n      }\n\n      // go to main screen\n      else {\n        props.goBack();\n      }\n    };\n    if (\"email\" in loginType) {\n      return /*#__PURE__*/jsx(PaperOTPLoginUI, {\n        ...props,\n        recoveryShareManagement: props.recoveryShareManagement,\n        selectionData: loginType.email,\n        goBack: handleBack\n      });\n    }\n\n    // google\n    else {\n      return /*#__PURE__*/jsx(PaperGoogleLogin, {\n        ...props,\n        goBack: handleBack\n      });\n    }\n  }\n  return /*#__PURE__*/jsx(PaperFormUIScreen, {\n    walletConfig: props.walletConfig,\n    googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n    modalSize: props.modalSize,\n    onSelect: _loginType => {\n      setLoginType(_loginType);\n    },\n    onBack: props.goBack\n  });\n};\nvar paperWallet$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  paperWallet: paperWallet\n});\nexport { FadeIn as F, GoogleIcon as G, OTPInput as O, paperWallet$1 as a, openGoogleSignInWindow as o, paperWallet as p };","map":{"version":3,"names":["PaperWallet","useRef","useEffect","useState","useCallback","styled","useCreateWalletInstance","useSetConnectionStatus","useSetConnectedWallet","useWalletContext","useConnectionStatus","E","fadeInAnimation","A","Input","f","fontSize","s","spacing","o","media","C","Container","B","Button","i","iconSize","S","Spacer","T","TextDivider","M","ModalHeader","b","Text","c","Spinner","L","Line","a","ModalTitle","r","reservedScreens","W","WalletEntryButton","jsxs","jsx","Fragment","I","InputSelectionUI","u","useScreenContext","e","emailIcon","GoogleIcon","props","xmlns","height","size","viewBox","width","children","d","fill","openGoogleSignInWindow","win","window","open","undefined","document","title","body","innerHTML","spinnerWindowHtml","FadeIn","div","OTPInput","otp","value","split","map","Number","setOTP","newOTP","setValue","join","inputToFocusIndex","length","boxEls","current","requestAnimationFrame","focus","center","gap","flex","Array","digits","_","OTPInputBox","isInvalid","ref","type","variant","onPaste","pastedData","clipboardData","getData","slice","filter","n","test","preventDefault","onKeyDown","key","onEnter","onChange","target","lastValue","index","md","xs","mobile","p","theme","colors","danger","PaperFormUI","createWalletInstance","setConnectionStatus","setConnectedWallet","googleLogin","paperWallet","walletConfig","googleWindow","Error","connect","openedWindow","closeOpenedWindow","close","console","error","googleLoginSupported","SocialButton","fullWidth","onClick","onSelect","google","y","email","placeholder","name","errorMessage","_input","input","replace","emailRegex","isValidEmail","emptyErrorMessage","showOrSeparator","PaperFormUIScreen","isCompact","modalSize","fullHeight","animate","style","minHeight","onBack","expand","sm","PaperOTPLoginUI","selectionData","otpInput","setOtpInput","recoveryCode","setRecoveryCode","wallet","setWallet","isWideModal","verifyStatus","setVerifyStatus","sendEmailStatus","setSendEmailStatus","recoveryCodeRequired","recoveryShareManagement","isNewDevice","isNewUser","sendEmail","_wallet","_paperSDK","getPaperSDK","auth","sendPaperEmailLoginOtp","handleSubmit","verifyCodes","emailSentOnMount","goBack","onSubmit","textAlign","color","px","multiline","maxWidth","autoComplete","required","id","LinkButton","button","accentText","primaryText","PaperGoogleLogin","connectionStatus","closeModal","paddingBottom","config","defaultRecovery","category","recommended","meta","iconURL","create","options","advancedOptions","selectUI","PaperSelectionUI","connectUI","PaperConnectUI","screen","main","selectWallet","supportedWallets","loginType","setLoginType","handleBack","_loginType","paperWallet$1","Object","freeze","__proto__","F","G","O"],"sources":["C:/Misc/Documents/Career/FinTech/BlockChain/FrontEnd/buildspace-dao-starter/node_modules/@thirdweb-dev/react/dist/paperWallet-968c4544.browser.esm.js"],"sourcesContent":["import { PaperWallet } from '@thirdweb-dev/wallets';\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { useCreateWalletInstance, useSetConnectionStatus, useSetConnectedWallet, useWalletContext, useConnectionStatus } from '@thirdweb-dev/react-core';\nimport { E as fadeInAnimation, A as Input, f as fontSize, s as spacing, o as media, C as Container, B as Button, i as iconSize, S as Spacer, T as TextDivider, M as ModalHeader, b as Text, c as Spinner, L as Line, a as ModalTitle, r as reservedScreens, W as WalletEntryButton } from './formElements-49d2196e.browser.esm.js';\nimport { jsxs, jsx, Fragment } from 'react/jsx-runtime';\nimport { I as InputSelectionUI } from './InputSelectionUI-6fc61f90.browser.esm.js';\nimport { u as useScreenContext } from './useWalletConnect-8a1a7bf9.browser.esm.js';\nimport { e as emailIcon } from './Tooltip-c0cbeb52.browser.esm.js';\n\nconst GoogleIcon = props => {\n  return /*#__PURE__*/jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: props.size,\n    viewBox: \"0 0 24 24\",\n    width: props.size,\n    children: [/*#__PURE__*/jsx(\"path\", {\n      d: \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\",\n      fill: \"#4285F4\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\",\n      fill: \"#34A853\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\",\n      fill: \"#FBBC05\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\",\n      fill: \"#EA4335\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M1 1h22v22H1z\",\n      fill: \"none\"\n    })]\n  });\n};\n\nfunction openGoogleSignInWindow() {\n  const win = window.open(\"\", undefined, \"width=350, height=500\");\n  if (win) {\n    win.document.title = \"Sign In - Google Accounts\";\n    win.document.body.innerHTML = spinnerWindowHtml;\n  }\n  return win;\n}\nconst spinnerWindowHtml = `\n<svg class=\"loader\" viewBox=\"0 0 50 50\">\n  <circle\n    cx=\"25\"\n    cy=\"25\"\n    r=\"20\"\n    fill=\"none\"\n    stroke=\"#000\"\n    stroke-width=\"4\"\n  />\n</svg>\n\n<style>\n  body,\n  html {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .loader {\n    width: 15vw;\n    height: 15vw;\n    animation: spin 2s linear infinite;\n  }\n\n  .loader circle {\n    animation: loading 1.5s linear infinite;\n  }\n\n  @keyframes loading {\n    0% {\n      stroke-dasharray: 1, 150;\n      stroke-dashoffset: 0;\n    }\n    50% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -35;\n    }\n    100% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -124;\n    }\n  }\n\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n</style>\n`;\n\nconst FadeIn = styled.div`\n  animation: ${fadeInAnimation} 0.15s ease-in;\n`;\n\nfunction OTPInput(props) {\n  const otp = props.value.split(\"\").map(Number);\n  const setOTP = newOTP => {\n    props.setValue(newOTP.join(\"\"));\n  };\n  const inputToFocusIndex = otp.length;\n  const boxEls = useRef([]);\n  useEffect(() => {\n    if (boxEls.current[inputToFocusIndex]) {\n      requestAnimationFrame(() => {\n        boxEls.current[inputToFocusIndex]?.focus();\n      });\n    }\n  }, [inputToFocusIndex]);\n  return /*#__PURE__*/jsx(Container, {\n    center: \"x\",\n    gap: \"sm\",\n    flex: \"row\",\n    children: new Array(props.digits).fill(null).map((_, i) => {\n      return /*#__PURE__*/jsx(OTPInputBox, {\n        \"data-error\": props.isInvalid,\n        ref: e => boxEls.current[i] = e,\n        value: otp[i] === undefined ? \"\" : otp[i],\n        type: \"number\",\n        variant: \"outline\",\n        onPaste: e => {\n          const pastedData = e.clipboardData.getData(\"text/plain\");\n          const newOTP = pastedData.slice(0, props.digits).split(\"\").filter(n => /[0-9]/.test(n)).map(Number);\n          setOTP(newOTP);\n          e.preventDefault();\n        },\n        onKeyDown: e => {\n          if (e.key === \"Enter\") {\n            if (props.onEnter) {\n              props.onEnter();\n              return;\n            }\n          }\n          if (e.key === \"ArrowLeft\") {\n            if (i === 0) {\n              return;\n            }\n            boxEls.current[i - 1]?.focus();\n            return;\n          }\n          if (e.key === \"ArrowRight\") {\n            if (i === props.digits - 1) {\n              return;\n            }\n            boxEls.current[i + 1]?.focus();\n            return;\n          }\n          if (e.key === \"e\" || e.key === \".\") {\n            e.preventDefault();\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            if (i === 0) {\n              return;\n            }\n            const newOTP = otp.slice(0, -1);\n            setOTP(newOTP);\n          }\n        },\n        onChange: e => {\n          let value = e.target.value;\n          if (value.length > 1) {\n            const lastValue = value[value.length - 1];\n            if (lastValue) {\n              value = lastValue;\n            }\n          }\n          if (!/[0-9]/.test(value) && value !== \"\") {\n            e.preventDefault();\n            return;\n          }\n          const newOTP = [...otp];\n          const index = i > inputToFocusIndex - 1 ? inputToFocusIndex : i;\n          newOTP[index] = Number(value);\n          setOTP(newOTP);\n        }\n      }, i);\n    })\n  });\n}\nconst OTPInputBox = styled(Input)`\n  appearance: none;\n  -webkit-appearance: none;\n  width: 40px;\n  height: 40px;\n  text-align: center;\n  font-size: ${fontSize.md};\n  padding: ${spacing.xs};\n  ${media.mobile} {\n    width: 35px;\n    height: 35px;\n  }\n  &[data-verify-status=\"invalid\"] {\n    color: ${p => p.theme.colors.danger};\n    border-color: ${p => p.theme.colors.danger};\n  }\n`;\n\nconst PaperFormUI = props => {\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  return /*#__PURE__*/jsxs(\"div\", {\n    children: [props.googleLoginSupported && /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsxs(SocialButton, {\n        variant: \"secondary\",\n        fullWidth: true,\n        onClick: () => {\n          googleLogin();\n          props.onSelect({\n            google: true\n          });\n        },\n        children: [/*#__PURE__*/jsx(GoogleIcon, {\n          size: iconSize.md\n        }), \"Sign in with Google\"]\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      }), /*#__PURE__*/jsx(TextDivider, {\n        children: /*#__PURE__*/jsx(\"span\", {\n          children: \"OR\"\n        })\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      })]\n    }), /*#__PURE__*/jsx(InputSelectionUI, {\n      onSelect: email => props.onSelect({\n        email\n      }),\n      placeholder: \"Enter your email address\",\n      name: \"email\",\n      type: \"email\",\n      errorMessage: _input => {\n        const input = _input.replace(/\\+/g, \"\");\n        const emailRegex = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,})$/g;\n        const isValidEmail = emailRegex.test(input);\n        if (!isValidEmail) {\n          return \"Invalid email address\";\n        }\n      },\n      emptyErrorMessage: \"email address is required\",\n      showOrSeparator: props.showOrSeparator\n    })]\n  });\n};\nconst PaperFormUIScreen = props => {\n  const isCompact = props.modalSize === \"compact\";\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    p: \"lg\",\n    animate: \"fadein\",\n    style: {\n      minHeight: \"250px\"\n    },\n    children: [/*#__PURE__*/jsx(ModalHeader, {\n      onBack: props.onBack,\n      title: \"Sign in\"\n    }), isCompact ? /*#__PURE__*/jsx(Spacer, {\n      y: \"xl\"\n    }) : null, /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      p: isCompact ? undefined : \"lg\",\n      children: /*#__PURE__*/jsx(PaperFormUI, {\n        walletConfig: props.walletConfig,\n        googleLoginSupported: props.googleLoginSupported,\n        onSelect: props.onSelect,\n        showOrSeparator: false\n      })\n    })]\n  });\n};\nconst SocialButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  gap: ${spacing.sm};\n`;\n\nconst PaperOTPLoginUI = props => {\n  const email = props.selectionData;\n  const [otpInput, setOtpInput] = useState(\"\");\n  const [recoveryCode, setRecoveryCode] = useState(\"\");\n  const {\n    createWalletInstance,\n    setConnectedWallet,\n    setConnectionStatus\n  } = useWalletContext();\n  const [wallet, setWallet] = useState(null);\n  const isWideModal = props.modalSize === \"wide\";\n  const [verifyStatus, setVerifyStatus] = useState(\"idle\");\n  const [sendEmailStatus, setSendEmailStatus] = useState(\"sending\");\n  const recoveryCodeRequired = !!(typeof sendEmailStatus !== \"string\" && sendEmailStatus.recoveryShareManagement !== \"AWS_MANAGED\" && sendEmailStatus.isNewDevice && !sendEmailStatus.isNewUser);\n  const sendEmail = useCallback(async () => {\n    setOtpInput(\"\");\n    setVerifyStatus(\"idle\");\n    setSendEmailStatus(\"sending\");\n    try {\n      const _wallet = createWalletInstance(props.walletConfig);\n      setWallet(_wallet);\n      const _paperSDK = await _wallet.getPaperSDK();\n      const {\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      } = await _paperSDK.auth.sendPaperEmailLoginOtp({\n        email: email\n      });\n      setSendEmailStatus({\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      });\n    } catch (e) {\n      console.error(e);\n      setVerifyStatus(\"idle\");\n      setSendEmailStatus(\"error\");\n    }\n  }, [createWalletInstance, email, props.walletConfig]);\n  const handleSubmit = otp => {\n    if (recoveryCodeRequired && !recoveryCode) {\n      return;\n    }\n    if (typeof sendEmailStatus === \"string\" || otp.length !== 6) {\n      return;\n    }\n    verifyCodes(otp);\n  };\n  const verifyCodes = async otp => {\n    setVerifyStatus(\"idle\");\n    if (!wallet) {\n      return;\n    }\n    try {\n      setVerifyStatus(\"verifying\");\n      setConnectionStatus(\"connecting\");\n      await wallet.connect({\n        email,\n        otp,\n        recoveryCode: recoveryCodeRequired ? recoveryCode : undefined\n      });\n      setConnectedWallet(wallet);\n      setVerifyStatus(\"valid\");\n      props.close();\n    } catch (e) {\n      setVerifyStatus(\"invalid\");\n      console.error(e);\n    }\n  };\n\n  // send email on mount\n  const emailSentOnMount = useRef(false);\n  useEffect(() => {\n    if (!emailSentOnMount.current) {\n      emailSentOnMount.current = true;\n      sendEmail();\n    }\n  }, [sendEmail]);\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    animate: \"fadein\",\n    children: [/*#__PURE__*/jsx(Container, {\n      p: \"lg\",\n      children: /*#__PURE__*/jsx(ModalHeader, {\n        title: \"Sign in\",\n        onBack: props.goBack\n      })\n    }), /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      children: /*#__PURE__*/jsxs(\"form\", {\n        onSubmit: e => {\n          e.preventDefault();\n        },\n        children: [/*#__PURE__*/jsxs(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [!isWideModal && /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Text, {\n            children: \"Enter the OTP sent to\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: email\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          })]\n        }), /*#__PURE__*/jsx(OTPInput, {\n          isInvalid: verifyStatus === \"invalid\",\n          digits: 6,\n          value: otpInput,\n          setValue: value => {\n            setOtpInput(value);\n            setVerifyStatus(\"idle\"); // reset error\n            if (!recoveryCodeRequired) {\n              handleSubmit(value);\n            }\n          },\n          onEnter: () => {\n            handleSubmit(otpInput);\n          }\n        }), recoveryCodeRequired && /*#__PURE__*/jsxs(Container, {\n          px: \"lg\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: \"New device detected\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            multiline: true,\n            style: {\n              maxWidth: \"350px\"\n            },\n            children: [\"Enter the recovery code emailed to you \", /*#__PURE__*/jsx(\"br\", {}), \" when you first signed up\"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Input, {\n            sm: true,\n            autoComplete: \"off\",\n            required: true,\n            \"data-error\": verifyStatus === \"invalid\",\n            id: \"recovery-code\",\n            variant: \"outline\",\n            style: {\n              textAlign: \"center\"\n            },\n            value: recoveryCode,\n            onChange: e => setRecoveryCode(e.target.value),\n            placeholder: \"Enter your recovery code\"\n          })]\n        }), verifyStatus === \"invalid\" && /*#__PURE__*/jsxs(FadeIn, {\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"md\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            color: \"danger\",\n            center: true,\n            children: [\"Invalid OTP \", recoveryCodeRequired ? \"or recovery code\" : \"\"]\n          })]\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), /*#__PURE__*/jsx(Container, {\n          px: isWideModal ? \"xxl\" : \"lg\",\n          children: verifyStatus === \"verifying\" ? /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Container, {\n              flex: \"row\",\n              center: \"x\",\n              animate: \"fadein\",\n              children: /*#__PURE__*/jsx(Spinner, {\n                size: \"lg\",\n                color: \"accentText\"\n              })\n            })\n          }) : /*#__PURE__*/jsx(Container, {\n            animate: \"fadein\",\n            children: /*#__PURE__*/jsx(Button, {\n              onClick: () => handleSubmit(otpInput),\n              variant: \"accent\",\n              type: \"submit\",\n              style: {\n                width: \"100%\"\n              },\n              children: \"Verify\"\n            })\n          }, \"btn-container\")\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), !isWideModal && /*#__PURE__*/jsx(Line, {}), /*#__PURE__*/jsxs(Container, {\n          p: isWideModal ? undefined : \"lg\",\n          children: [sendEmailStatus === \"error\" && /*#__PURE__*/jsxs(Fragment, {\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              center: true,\n              color: \"danger\",\n              children: \"Failed to send OTP\"\n            }), /*#__PURE__*/jsx(Spacer, {\n              y: \"md\"\n            })]\n          }), sendEmailStatus === \"sending\" && /*#__PURE__*/jsxs(Container, {\n            flex: \"row\",\n            center: \"both\",\n            gap: \"xs\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              children: \"Sending OTP\"\n            }), /*#__PURE__*/jsx(Spinner, {\n              size: \"xs\",\n              color: \"secondaryText\"\n            })]\n          }), typeof sendEmailStatus !== \"string\" && /*#__PURE__*/jsx(LinkButton, {\n            onClick: sendEmail,\n            type: \"button\",\n            children: \"Resend OTP\"\n          })]\n        })]\n      })\n    })]\n  });\n};\nconst LinkButton = styled.button`\n  all: unset;\n  color: ${p => p.theme.colors.accentText};\n  font-size: ${fontSize.sm};\n  cursor: pointer;\n  text-align: center;\n  width: 100%;\n  &:hover {\n    color: ${p => p.theme.colors.primaryText};\n  }\n`;\n\nconst PaperGoogleLogin = props => {\n  const {\n    goBack,\n    modalSize\n  } = props;\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const connectionStatus = useConnectionStatus();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n      props.close();\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  const closeModal = props.close;\n  useEffect(() => {\n    if (connectionStatus === \"connected\") {\n      closeModal();\n    }\n  }, [connectionStatus, closeModal]);\n  return /*#__PURE__*/jsx(Container, {\n    animate: \"fadein\",\n    flex: \"column\",\n    fullHeight: true,\n    children: /*#__PURE__*/jsxs(Container, {\n      flex: \"column\",\n      expand: true,\n      p: \"lg\",\n      style: {\n        paddingBottom: 0\n      },\n      children: [/*#__PURE__*/jsx(ModalHeader, {\n        title: /*#__PURE__*/jsxs(Container, {\n          flex: \"row\",\n          center: \"both\",\n          gap: \"xs\",\n          children: [/*#__PURE__*/jsx(GoogleIcon, {\n            size: iconSize.md\n          }), /*#__PURE__*/jsx(ModalTitle, {\n            children: \" Sign in \"\n          })]\n        }),\n        onBack: goBack\n      }), modalSize === \"compact\" ? /*#__PURE__*/jsx(Spacer, {\n        y: \"xl\"\n      }) : null, /*#__PURE__*/jsxs(Container, {\n        flex: \"column\",\n        center: \"both\",\n        expand: true,\n        style: {\n          textAlign: \"center\",\n          minHeight: \"250px\"\n        },\n        children: [connectionStatus === \"connecting\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            multiline: true,\n            style: {\n              maxWidth: \"250px\"\n            },\n            children: \"Select your Google account in the pop-up\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          }), /*#__PURE__*/jsx(Container, {\n            center: \"x\",\n            flex: \"row\",\n            children: /*#__PURE__*/jsx(Spinner, {\n              size: \"lg\",\n              color: \"accentText\"\n            })\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        }), connectionStatus === \"disconnected\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"danger\",\n            children: \"Failed to sign in\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsxs(Button, {\n            variant: \"primary\",\n            onClick: googleLogin,\n            children: [\" \", \"Retry\", \" \"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nconst paperWallet = config => {\n  const defaultRecovery = \"AWS_MANAGED\";\n  return {\n    category: \"socialLogin\",\n    id: PaperWallet.id,\n    recommended: config?.recommended,\n    meta: {\n      ...PaperWallet.meta,\n      name: \"Email\",\n      iconURL: emailIcon\n    },\n    create(options) {\n      return new PaperWallet({\n        ...options,\n        ...config,\n        advancedOptions: {\n          recoveryShareManagement: \"AWS_MANAGED\",\n          ...config?.advancedOptions\n        }\n      });\n    },\n    selectUI(props) {\n      return /*#__PURE__*/jsx(PaperSelectionUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    },\n    connectUI(props) {\n      return /*#__PURE__*/jsx(PaperConnectUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    }\n  };\n};\nconst PaperSelectionUI = props => {\n  const screen = useScreenContext();\n\n  // show the icon + text if\n  // wide -\n  // compact + not main screen (safe/smart wallet list screen)\n  if (props.modalSize === \"wide\" || screen !== reservedScreens.main && props.modalSize === \"compact\") {\n    return /*#__PURE__*/jsx(WalletEntryButton, {\n      walletConfig: props.walletConfig,\n      selectWallet: () => {\n        props.onSelect(undefined);\n      }\n    });\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    children: /*#__PURE__*/jsx(PaperFormUI, {\n      walletConfig: props.walletConfig,\n      googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n      showOrSeparator: props.supportedWallets.length > 1,\n      onSelect: props.onSelect\n    })\n  });\n};\nconst PaperConnectUI = props => {\n  const [loginType, setLoginType] = useState(props.selectionData);\n  if (loginType) {\n    const handleBack = () => {\n      // go back to base screen\n      if (props.modalSize === \"wide\") {\n        setLoginType(undefined);\n      }\n\n      // go to main screen\n      else {\n        props.goBack();\n      }\n    };\n    if (\"email\" in loginType) {\n      return /*#__PURE__*/jsx(PaperOTPLoginUI, {\n        ...props,\n        recoveryShareManagement: props.recoveryShareManagement,\n        selectionData: loginType.email,\n        goBack: handleBack\n      });\n    }\n\n    // google\n    else {\n      return /*#__PURE__*/jsx(PaperGoogleLogin, {\n        ...props,\n        goBack: handleBack\n      });\n    }\n  }\n  return /*#__PURE__*/jsx(PaperFormUIScreen, {\n    walletConfig: props.walletConfig,\n    googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n    modalSize: props.modalSize,\n    onSelect: _loginType => {\n      setLoginType(_loginType);\n    },\n    onBack: props.goBack\n  });\n};\n\nvar paperWallet$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  paperWallet: paperWallet\n});\n\nexport { FadeIn as F, GoogleIcon as G, OTPInput as O, paperWallet$1 as a, openGoogleSignInWindow as o, paperWallet as p };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}