{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst bignumber_1 = require(\"@ethersproject/bignumber\");\nclass GnosisSafeProxyFactoryEthersContract {\n  constructor(contract) {\n    this.contract = contract;\n  }\n  getAddress() {\n    return this.contract.address;\n  }\n  async proxyCreationCode() {\n    return this.contract.proxyCreationCode();\n  }\n  async createProxy(_ref) {\n    let {\n      safeMasterCopyAddress,\n      initializer,\n      saltNonce,\n      options,\n      callback\n    } = _ref;\n    if (bignumber_1.BigNumber.from(saltNonce).lt(0)) throw new Error('saltNonce must be greater than or equal to 0');\n    if (options && !options.gasLimit) {\n      options.gasLimit = await this.estimateGas('createProxyWithNonce', [safeMasterCopyAddress, initializer, saltNonce], {\n        ...options\n      });\n    }\n    const proxyAddress = this.contract.createProxyWithNonce(safeMasterCopyAddress, initializer, saltNonce, options).then(async txResponse => {\n      var _a;\n      if (callback) {\n        callback(txResponse.hash);\n      }\n      const txReceipt = await txResponse.wait();\n      const proxyCreationEvent = (_a = txReceipt === null || txReceipt === void 0 ? void 0 : txReceipt.events) === null || _a === void 0 ? void 0 : _a.find(_ref2 => {\n        let {\n          event\n        } = _ref2;\n        return event === 'ProxyCreation';\n      });\n      if (!proxyCreationEvent || !proxyCreationEvent.args) {\n        throw new Error('SafeProxy was not deployed correctly');\n      }\n      const proxyAddress = proxyCreationEvent.args[0];\n      return proxyAddress;\n    });\n    return proxyAddress;\n  }\n  encode(methodName, params) {\n    return this.contract.interface.encodeFunctionData(methodName, params);\n  }\n  async estimateGas(methodName, params, options) {\n    return (await this.contract.estimateGas[methodName](...params, options)).toNumber();\n  }\n}\nexports.default = GnosisSafeProxyFactoryEthersContract;","map":{"version":3,"names":["bignumber_1","require","GnosisSafeProxyFactoryEthersContract","constructor","contract","getAddress","address","proxyCreationCode","createProxy","_ref","safeMasterCopyAddress","initializer","saltNonce","options","callback","BigNumber","from","lt","Error","gasLimit","estimateGas","proxyAddress","createProxyWithNonce","then","txResponse","hash","txReceipt","wait","proxyCreationEvent","_a","events","find","_ref2","event","args","encode","methodName","params","interface","encodeFunctionData","toNumber","exports","default"],"sources":["../../../../src/contracts/GnosisSafeProxyFactory/GnosisSafeProxyFactoryEthersContract.ts"],"sourcesContent":[null],"mappings":";;;;;AAAA,MAAAA,WAAA,GAAAC,OAAA;AAgBA,MAAMC,oCAAoC;EACxCC,YAAmBC,QAAyE;IAAzE,KAAAA,QAAQ,GAARA,QAAQ;EAAoE;EAE/FC,UAAUA,CAAA;IACR,OAAO,IAAI,CAACD,QAAQ,CAACE,OAAO;EAC9B;EAEA,MAAMC,iBAAiBA,CAAA;IACrB,OAAO,IAAI,CAACH,QAAQ,CAACG,iBAAiB,EAAE;EAC1C;EAEA,MAAMC,WAAWA,CAAAC,IAAA,EAME;IAAA,IAND;MAChBC,qBAAqB;MACrBC,WAAW;MACXC,SAAS;MACTC,OAAO;MACPC;IAAQ,CACS,GAAAL,IAAA;IACjB,IAAIT,WAAA,CAAAe,SAAS,CAACC,IAAI,CAACJ,SAAS,CAAC,CAACK,EAAE,CAAC,CAAC,CAAC,EACjC,MAAM,IAAIC,KAAK,CAAC,8CAA8C,CAAC;IACjE,IAAIL,OAAO,IAAI,CAACA,OAAO,CAACM,QAAQ,EAAE;MAChCN,OAAO,CAACM,QAAQ,GAAG,MAAM,IAAI,CAACC,WAAW,CACvC,sBAAsB,EACtB,CAACV,qBAAqB,EAAEC,WAAW,EAAEC,SAAS,CAAC,EAC/C;QACE,GAAGC;OACJ,CACF;;IAEH,MAAMQ,YAAY,GAAG,IAAI,CAACjB,QAAQ,CAC/BkB,oBAAoB,CAACZ,qBAAqB,EAAEC,WAAW,EAAEC,SAAS,EAAEC,OAAO,CAAC,CAC5EU,IAAI,CAAC,MAAOC,UAAU,IAAI;;MACzB,IAAIV,QAAQ,EAAE;QACZA,QAAQ,CAACU,UAAU,CAACC,IAAI,CAAC;;MAE3B,MAAMC,SAAS,GAAG,MAAMF,UAAU,CAACG,IAAI,EAAE;MACzC,MAAMC,kBAAkB,GAAG,CAAAC,EAAA,GAAAH,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEI,MAAM,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,IAAI,CAChDC,KAAA;QAAA,IAAC;UAAEC;QAAK,CAAS,GAAAD,KAAA;QAAA,OAAKC,KAAK,KAAK,eAAe;MAAA,EAChD;MACD,IAAI,CAACL,kBAAkB,IAAI,CAACA,kBAAkB,CAACM,IAAI,EAAE;QACnD,MAAM,IAAIhB,KAAK,CAAC,sCAAsC,CAAC;;MAEzD,MAAMG,YAAY,GAAWO,kBAAkB,CAACM,IAAI,CAAC,CAAC,CAAC;MACvD,OAAOb,YAAY;IACrB,CAAC,CAAC;IACJ,OAAOA,YAAY;EACrB;EAEAc,MAAMA,CAACC,UAAkB,EAAEC,MAAa;IACtC,OAAQ,IAAI,CAACjC,QAAgB,CAACkC,SAAS,CAACC,kBAAkB,CAACH,UAAU,EAAEC,MAAM,CAAC;EAChF;EAEA,MAAMjB,WAAWA,CACfgB,UAAkB,EAClBC,MAAa,EACbxB,OAAiC;IAEjC,OAAO,CAAC,MAAO,IAAI,CAACT,QAAQ,CAACgB,WAAmB,CAACgB,UAAU,CAAC,CAAC,GAAGC,MAAM,EAAExB,OAAO,CAAC,EAAE2B,QAAQ,EAAE;EAC9F;;AAGFC,OAAA,CAAAC,OAAA,GAAexC,oCAAoC"},"metadata":{},"sourceType":"script","externalDependencies":[]}