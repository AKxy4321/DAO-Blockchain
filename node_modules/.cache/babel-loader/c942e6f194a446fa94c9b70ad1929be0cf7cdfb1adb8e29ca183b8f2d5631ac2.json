{"ast":null,"code":"import { DoubleSide } from 'three';\nimport * as fflate from '../libs/fflate.module.js';\nclass USDZExporter {\n  async parse(scene) {\n    const files = {};\n    const modelFileName = 'model.usda';\n\n    // model file should be first in USDZ archive so we init it here\n    files[modelFileName] = null;\n    let output = buildHeader();\n    const materials = {};\n    const textures = {};\n    scene.traverseVisible(object => {\n      if (object.isMesh) {\n        const geometry = object.geometry;\n        const material = object.material;\n        if (material.isMeshStandardMaterial) {\n          const geometryFileName = 'geometries/Geometry_' + geometry.id + '.usd';\n          if (!(geometryFileName in files)) {\n            const meshObject = buildMeshObject(geometry);\n            files[geometryFileName] = buildUSDFileAsString(meshObject);\n          }\n          if (!(material.uuid in materials)) {\n            materials[material.uuid] = material;\n          }\n          output += buildXform(object, geometry, material);\n        } else {\n          console.warn('THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)', object);\n        }\n      } else if (object.isCamera) {\n        output += buildCamera(object);\n      }\n    });\n    output += buildMaterials(materials, textures);\n    files[modelFileName] = fflate.strToU8(output);\n    output = null;\n    for (const id in textures) {\n      const texture = textures[id];\n      const color = id.split('_')[1];\n      const isRGBA = texture.format === 1023;\n      const canvas = imageToCanvas(texture.image, color);\n      const blob = await new Promise(resolve => canvas.toBlob(resolve, isRGBA ? 'image/png' : 'image/jpeg', 1));\n      files[\"textures/Texture_\".concat(id, \".\").concat(isRGBA ? 'png' : 'jpg')] = new Uint8Array(await blob.arrayBuffer());\n    }\n\n    // 64 byte alignment\n    // https://github.com/101arrowz/fflate/issues/39#issuecomment-777263109\n\n    let offset = 0;\n    for (const filename in files) {\n      const file = files[filename];\n      const headerSize = 34 + filename.length;\n      offset += headerSize;\n      const offsetMod64 = offset & 63;\n      if (offsetMod64 !== 4) {\n        const padLength = 64 - offsetMod64;\n        const padding = new Uint8Array(padLength);\n        files[filename] = [file, {\n          extra: {\n            12345: padding\n          }\n        }];\n      }\n      offset = file.length;\n    }\n    return fflate.zipSync(files, {\n      level: 0\n    });\n  }\n}\nfunction imageToCanvas(image, color) {\n  if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    const scale = 1024 / Math.max(image.width, image.height);\n    const canvas = document.createElement('canvas');\n    canvas.width = image.width * Math.min(1, scale);\n    canvas.height = image.height * Math.min(1, scale);\n    const context = canvas.getContext('2d');\n    context.drawImage(image, 0, 0, canvas.width, canvas.height);\n    if (color !== undefined) {\n      const hex = parseInt(color, 16);\n      const r = (hex >> 16 & 255) / 255;\n      const g = (hex >> 8 & 255) / 255;\n      const b = (hex & 255) / 255;\n      const imagedata = context.getImageData(0, 0, canvas.width, canvas.height);\n      const data = imagedata.data;\n      for (let i = 0; i < data.length; i += 4) {\n        data[i + 0] = data[i + 0] * r;\n        data[i + 1] = data[i + 1] * g;\n        data[i + 2] = data[i + 2] * b;\n      }\n      context.putImageData(imagedata, 0, 0);\n    }\n    return canvas;\n  }\n}\n\n//\n\nconst PRECISION = 7;\nfunction buildHeader() {\n  return \"#usda 1.0\\n(\\n    customLayerData = {\\n        string creator = \\\"Three.js USDZExporter\\\"\\n    }\\n    metersPerUnit = 1\\n    upAxis = \\\"Y\\\"\\n)\\n\\n\";\n}\nfunction buildUSDFileAsString(dataToInsert) {\n  let output = buildHeader();\n  output += dataToInsert;\n  return fflate.strToU8(output);\n}\n\n// Xform\n\nfunction buildXform(object, geometry, material) {\n  const name = 'Object_' + object.id;\n  const transform = buildMatrix(object.matrixWorld);\n  if (object.matrixWorld.determinant() < 0) {\n    console.warn('THREE.USDZExporter: USDZ does not support negative scales', object);\n  }\n  return \"def Xform \\\"\".concat(name, \"\\\" (\\n    prepend references = @./geometries/Geometry_\").concat(geometry.id, \".usd@</Geometry>\\n)\\n{\\n    matrix4d xformOp:transform = \").concat(transform, \"\\n    uniform token[] xformOpOrder = [\\\"xformOp:transform\\\"]\\n\\n    rel material:binding = </Materials/Material_\").concat(material.id, \">\\n}\\n\\n\");\n}\nfunction buildMatrix(matrix) {\n  const array = matrix.elements;\n  return \"( \".concat(buildMatrixRow(array, 0), \", \").concat(buildMatrixRow(array, 4), \", \").concat(buildMatrixRow(array, 8), \", \").concat(buildMatrixRow(array, 12), \" )\");\n}\nfunction buildMatrixRow(array, offset) {\n  return \"(\".concat(array[offset + 0], \", \").concat(array[offset + 1], \", \").concat(array[offset + 2], \", \").concat(array[offset + 3], \")\");\n}\n\n// Mesh\n\nfunction buildMeshObject(geometry) {\n  const mesh = buildMesh(geometry);\n  return \"\\ndef \\\"Geometry\\\"\\n{\\n  \".concat(mesh, \"\\n}\\n\");\n}\nfunction buildMesh(geometry) {\n  const name = 'Geometry';\n  const attributes = geometry.attributes;\n  const count = attributes.position.count;\n  return \"\\n    def Mesh \\\"\".concat(name, \"\\\"\\n    {\\n        int[] faceVertexCounts = [\").concat(buildMeshVertexCount(geometry), \"]\\n        int[] faceVertexIndices = [\").concat(buildMeshVertexIndices(geometry), \"]\\n        normal3f[] normals = [\").concat(buildVector3Array(attributes.normal, count), \"] (\\n            interpolation = \\\"vertex\\\"\\n        )\\n        point3f[] points = [\").concat(buildVector3Array(attributes.position, count), \"]\\n        float2[] primvars:st = [\").concat(buildVector2Array(attributes.uv, count), \"] (\\n            interpolation = \\\"vertex\\\"\\n        )\\n        uniform token subdivisionScheme = \\\"none\\\"\\n    }\\n\");\n}\nfunction buildMeshVertexCount(geometry) {\n  const count = geometry.index !== null ? geometry.index.count : geometry.attributes.position.count;\n  return Array(count / 3).fill(3).join(', ');\n}\nfunction buildMeshVertexIndices(geometry) {\n  const index = geometry.index;\n  const array = [];\n  if (index !== null) {\n    for (let i = 0; i < index.count; i++) {\n      array.push(index.getX(i));\n    }\n  } else {\n    const length = geometry.attributes.position.count;\n    for (let i = 0; i < length; i++) {\n      array.push(i);\n    }\n  }\n  return array.join(', ');\n}\nfunction buildVector3Array(attribute, count) {\n  if (attribute === undefined) {\n    console.warn('USDZExporter: Normals missing.');\n    return Array(count).fill('(0, 0, 0)').join(', ');\n  }\n  const array = [];\n  for (let i = 0; i < attribute.count; i++) {\n    const x = attribute.getX(i);\n    const y = attribute.getY(i);\n    const z = attribute.getZ(i);\n    array.push(\"(\".concat(x.toPrecision(PRECISION), \", \").concat(y.toPrecision(PRECISION), \", \").concat(z.toPrecision(PRECISION), \")\"));\n  }\n  return array.join(', ');\n}\nfunction buildVector2Array(attribute, count) {\n  if (attribute === undefined) {\n    console.warn('USDZExporter: UVs missing.');\n    return Array(count).fill('(0, 0)').join(', ');\n  }\n  const array = [];\n  for (let i = 0; i < attribute.count; i++) {\n    const x = attribute.getX(i);\n    const y = attribute.getY(i);\n    array.push(\"(\".concat(x.toPrecision(PRECISION), \", \").concat(1 - y.toPrecision(PRECISION), \")\"));\n  }\n  return array.join(', ');\n}\n\n// Materials\n\nfunction buildMaterials(materials, textures) {\n  const array = [];\n  for (const uuid in materials) {\n    const material = materials[uuid];\n    array.push(buildMaterial(material, textures));\n  }\n  return \"def \\\"Materials\\\"\\n{\\n\".concat(array.join(''), \"\\n}\\n\\n\");\n}\nfunction buildMaterial(material, textures) {\n  // https://graphics.pixar.com/usd/docs/UsdPreviewSurface-Proposal.html\n\n  const pad = '            ';\n  const inputs = [];\n  const samplers = [];\n  function buildTexture(texture, mapType, color) {\n    const id = texture.id + (color ? '_' + color.getHexString() : '');\n    const isRGBA = texture.format === 1023;\n    textures[id] = texture;\n    return \"\\n        def Shader \\\"Transform2d_\".concat(mapType, \"\\\" (\\n            sdrMetadata = {\\n                string role = \\\"math\\\"\\n            }\\n        )\\n        {\\n            uniform token info:id = \\\"UsdTransform2d\\\"\\n            float2 inputs:in.connect = </Materials/Material_\").concat(material.id, \"/uvReader_st.outputs:result>\\n            float2 inputs:scale = \").concat(buildVector2(texture.repeat), \"\\n            float2 inputs:translation = \").concat(buildVector2(texture.offset), \"\\n            float2 outputs:result\\n        }\\n\\n        def Shader \\\"Texture_\").concat(texture.id, \"_\").concat(mapType, \"\\\"\\n        {\\n            uniform token info:id = \\\"UsdUVTexture\\\"\\n            asset inputs:file = @textures/Texture_\").concat(id, \".\").concat(isRGBA ? 'png' : 'jpg', \"@\\n            float2 inputs:st.connect = </Materials/Material_\").concat(material.id, \"/Transform2d_\").concat(mapType, \".outputs:result>\\n            token inputs:wrapS = \\\"repeat\\\"\\n            token inputs:wrapT = \\\"repeat\\\"\\n            float outputs:r\\n            float outputs:g\\n            float outputs:b\\n            float3 outputs:rgb\\n            \").concat(material.transparent || material.alphaTest > 0.0 ? 'float outputs:a' : '', \"\\n        }\");\n  }\n  if (material.side === DoubleSide) {\n    console.warn('THREE.USDZExporter: USDZ does not support double sided materials', material);\n  }\n  if (material.map !== null) {\n    inputs.push(\"\".concat(pad, \"color3f inputs:diffuseColor.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.map.id, \"_diffuse.outputs:rgb>\"));\n    if (material.transparent) {\n      inputs.push(\"\".concat(pad, \"float inputs:opacity.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.map.id, \"_diffuse.outputs:a>\"));\n    } else if (material.alphaTest > 0.0) {\n      inputs.push(\"\".concat(pad, \"float inputs:opacity.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.map.id, \"_diffuse.outputs:a>\"));\n      inputs.push(\"\".concat(pad, \"float inputs:opacityThreshold = \").concat(material.alphaTest));\n    }\n    samplers.push(buildTexture(material.map, 'diffuse', material.color));\n  } else {\n    inputs.push(\"\".concat(pad, \"color3f inputs:diffuseColor = \").concat(buildColor(material.color)));\n  }\n  if (material.emissiveMap !== null) {\n    inputs.push(\"\".concat(pad, \"color3f inputs:emissiveColor.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.emissiveMap.id, \"_emissive.outputs:rgb>\"));\n    samplers.push(buildTexture(material.emissiveMap, 'emissive'));\n  } else if (material.emissive.getHex() > 0) {\n    inputs.push(\"\".concat(pad, \"color3f inputs:emissiveColor = \").concat(buildColor(material.emissive)));\n  }\n  if (material.normalMap !== null) {\n    inputs.push(\"\".concat(pad, \"normal3f inputs:normal.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.normalMap.id, \"_normal.outputs:rgb>\"));\n    samplers.push(buildTexture(material.normalMap, 'normal'));\n  }\n  if (material.aoMap !== null) {\n    inputs.push(\"\".concat(pad, \"float inputs:occlusion.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.aoMap.id, \"_occlusion.outputs:r>\"));\n    samplers.push(buildTexture(material.aoMap, 'occlusion'));\n  }\n  if (material.roughnessMap !== null && material.roughness === 1) {\n    inputs.push(\"\".concat(pad, \"float inputs:roughness.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.roughnessMap.id, \"_roughness.outputs:g>\"));\n    samplers.push(buildTexture(material.roughnessMap, 'roughness'));\n  } else {\n    inputs.push(\"\".concat(pad, \"float inputs:roughness = \").concat(material.roughness));\n  }\n  if (material.metalnessMap !== null && material.metalness === 1) {\n    inputs.push(\"\".concat(pad, \"float inputs:metallic.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.metalnessMap.id, \"_metallic.outputs:b>\"));\n    samplers.push(buildTexture(material.metalnessMap, 'metallic'));\n  } else {\n    inputs.push(\"\".concat(pad, \"float inputs:metallic = \").concat(material.metalness));\n  }\n  if (material.alphaMap !== null) {\n    inputs.push(\"\".concat(pad, \"float inputs:opacity.connect = </Materials/Material_\").concat(material.id, \"/Texture_\").concat(material.alphaMap.id, \"_opacity.outputs:r>\"));\n    inputs.push(\"\".concat(pad, \"float inputs:opacityThreshold = 0.0001\"));\n    samplers.push(buildTexture(material.alphaMap, 'opacity'));\n  } else {\n    inputs.push(\"\".concat(pad, \"float inputs:opacity = \").concat(material.opacity));\n  }\n  if (material.isMeshPhysicalMaterial) {\n    inputs.push(\"\".concat(pad, \"float inputs:clearcoat = \").concat(material.clearcoat));\n    inputs.push(\"\".concat(pad, \"float inputs:clearcoatRoughness = \").concat(material.clearcoatRoughness));\n    inputs.push(\"\".concat(pad, \"float inputs:ior = \").concat(material.ior));\n  }\n  return \"\\n    def Material \\\"Material_\".concat(material.id, \"\\\"\\n    {\\n        def Shader \\\"PreviewSurface\\\"\\n        {\\n            uniform token info:id = \\\"UsdPreviewSurface\\\"\\n\").concat(inputs.join('\\n'), \"\\n            int inputs:useSpecularWorkflow = 0\\n            token outputs:surface\\n        }\\n\\n        token outputs:surface.connect = </Materials/Material_\").concat(material.id, \"/PreviewSurface.outputs:surface>\\n        token inputs:frame:stPrimvarName = \\\"st\\\"\\n\\n        def Shader \\\"uvReader_st\\\"\\n        {\\n            uniform token info:id = \\\"UsdPrimvarReader_float2\\\"\\n            token inputs:varname.connect = </Materials/Material_\").concat(material.id, \".inputs:frame:stPrimvarName>\\n            float2 inputs:fallback = (0.0, 0.0)\\n            float2 outputs:result\\n        }\\n\\n\").concat(samplers.join('\\n'), \"\\n\\n    }\\n\");\n}\nfunction buildColor(color) {\n  return \"(\".concat(color.r, \", \").concat(color.g, \", \").concat(color.b, \")\");\n}\nfunction buildVector2(vector) {\n  return \"(\".concat(vector.x, \", \").concat(vector.y, \")\");\n}\nfunction buildCamera(camera) {\n  const name = camera.name ? camera.name : 'Camera_' + camera.id;\n  const transform = buildMatrix(camera.matrixWorld);\n  if (camera.matrixWorld.determinant() < 0) {\n    console.warn('THREE.USDZExporter: USDZ does not support negative scales', camera);\n  }\n  if (camera.isOrthographicCamera) {\n    return \"def Camera \\\"\".concat(name, \"\\\"\\n\\t\\t{\\n\\t\\t\\tmatrix4d xformOp:transform = \").concat(transform, \"\\n\\t\\t\\tuniform token[] xformOpOrder = [\\\"xformOp:transform\\\"]\\n\\t\\n\\t\\t\\tfloat2 clippingRange = (\").concat(camera.near, \", \").concat(camera.far, \")\\n\\t\\t\\tfloat horizontalAperture = \").concat((Math.abs(camera.left) + Math.abs(camera.right)) * 10, \"\\n\\t\\t\\tfloat verticalAperture = \").concat((Math.abs(camera.top) + Math.abs(camera.bottom)) * 10, \"\\n\\t\\t\\ttoken projection = \\\"orthographic\\\"\\n\\t\\t}\\n\\t\\n\\t\");\n  } else {\n    return \"def Camera \\\"\".concat(name, \"\\\"\\n\\t\\t{\\n\\t\\t\\tmatrix4d xformOp:transform = \").concat(transform, \"\\n\\t\\t\\tuniform token[] xformOpOrder = [\\\"xformOp:transform\\\"]\\n\\t\\n\\t\\t\\tfloat2 clippingRange = (\").concat(camera.near, \", \").concat(camera.far, \")\\n\\t\\t\\tfloat focalLength = \").concat(camera.getFocalLength(), \"\\n\\t\\t\\tfloat focusDistance = \").concat(camera.focus, \"\\n\\t\\t\\tfloat horizontalAperture = \").concat(camera.getFilmWidth(), \"\\n\\t\\t\\ttoken projection = \\\"perspective\\\"\\n\\t\\t\\tfloat verticalAperture = \").concat(camera.getFilmHeight(), \"\\n\\t\\t}\\n\\t\\n\\t\");\n  }\n}\nexport { USDZExporter };","map":{"version":3,"names":["DoubleSide","fflate","USDZExporter","parse","scene","files","modelFileName","output","buildHeader","materials","textures","traverseVisible","object","isMesh","geometry","material","isMeshStandardMaterial","geometryFileName","id","meshObject","buildMeshObject","buildUSDFileAsString","uuid","buildXform","console","warn","isCamera","buildCamera","buildMaterials","strToU8","texture","color","split","isRGBA","format","canvas","imageToCanvas","image","blob","Promise","resolve","toBlob","concat","Uint8Array","arrayBuffer","offset","filename","file","headerSize","length","offsetMod64","padLength","padding","extra","zipSync","level","HTMLImageElement","HTMLCanvasElement","OffscreenCanvas","ImageBitmap","scale","Math","max","width","height","document","createElement","min","context","getContext","drawImage","undefined","hex","parseInt","r","g","b","imagedata","getImageData","data","i","putImageData","PRECISION","dataToInsert","name","transform","buildMatrix","matrixWorld","determinant","matrix","array","elements","buildMatrixRow","mesh","buildMesh","attributes","count","position","buildMeshVertexCount","buildMeshVertexIndices","buildVector3Array","normal","buildVector2Array","uv","index","Array","fill","join","push","getX","attribute","x","y","getY","z","getZ","toPrecision","buildMaterial","pad","inputs","samplers","buildTexture","mapType","getHexString","buildVector2","repeat","transparent","alphaTest","side","map","buildColor","emissiveMap","emissive","getHex","normalMap","aoMap","roughnessMap","roughness","metalnessMap","metalness","alphaMap","opacity","isMeshPhysicalMaterial","clearcoat","clearcoatRoughness","ior","vector","camera","isOrthographicCamera","near","far","abs","left","right","top","bottom","getFocalLength","focus","getFilmWidth","getFilmHeight"],"sources":["C:/Misc/Documents/Career/FinTech/BlockChain/FrontEnd/buildspace-dao-starter/node_modules/three/examples/jsm/exporters/USDZExporter.js"],"sourcesContent":["import {\n\tDoubleSide\n} from 'three';\n\nimport * as fflate from '../libs/fflate.module.js';\n\nclass USDZExporter {\n\n\tasync parse( scene ) {\n\n\t\tconst files = {};\n\t\tconst modelFileName = 'model.usda';\n\n\t\t// model file should be first in USDZ archive so we init it here\n\t\tfiles[ modelFileName ] = null;\n\n\t\tlet output = buildHeader();\n\n\t\tconst materials = {};\n\t\tconst textures = {};\n\n\t\tscene.traverseVisible( ( object ) => {\n\n\t\t\tif ( object.isMesh ) {\n\n\t\t\t\tconst geometry = object.geometry;\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( material.isMeshStandardMaterial ) {\n\n\t\t\t\t\tconst geometryFileName = 'geometries/Geometry_' + geometry.id + '.usd';\n\n\t\t\t\t\tif ( ! ( geometryFileName in files ) ) {\n\n\t\t\t\t\t\tconst meshObject = buildMeshObject( geometry );\n\t\t\t\t\t\tfiles[ geometryFileName ] = buildUSDFileAsString( meshObject );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! ( material.uuid in materials ) ) {\n\n\t\t\t\t\t\tmaterials[ material.uuid ] = material;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutput += buildXform( object, geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)', object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isCamera ) {\n\t\t\t\t\n\t\t\t\toutput += buildCamera( object );\n\n\t\t\t}\n\n\t\t} );\n\n\t\toutput += buildMaterials( materials, textures );\n\n\t\tfiles[ modelFileName ] = fflate.strToU8( output );\n\t\toutput = null;\n\n\t\tfor ( const id in textures ) {\n\n\t\t\tconst texture = textures[ id ];\n\t\t\tconst color = id.split( '_' )[ 1 ];\n\t\t\tconst isRGBA = texture.format === 1023;\n\n\t\t\tconst canvas = imageToCanvas( texture.image, color );\n\t\t\tconst blob = await new Promise( resolve => canvas.toBlob( resolve, isRGBA ? 'image/png' : 'image/jpeg', 1 ) );\n\n\t\t\tfiles[ `textures/Texture_${ id }.${ isRGBA ? 'png' : 'jpg' }` ] = new Uint8Array( await blob.arrayBuffer() );\n\n\t\t}\n\n\t\t// 64 byte alignment\n\t\t// https://github.com/101arrowz/fflate/issues/39#issuecomment-777263109\n\n\t\tlet offset = 0;\n\n\t\tfor ( const filename in files ) {\n\n\t\t\tconst file = files[ filename ];\n\t\t\tconst headerSize = 34 + filename.length;\n\n\t\t\toffset += headerSize;\n\n\t\t\tconst offsetMod64 = offset & 63;\n\n\t\t\tif ( offsetMod64 !== 4 ) {\n\n\t\t\t\tconst padLength = 64 - offsetMod64;\n\t\t\t\tconst padding = new Uint8Array( padLength );\n\n\t\t\t\tfiles[ filename ] = [ file, { extra: { 12345: padding } } ];\n\n\t\t\t}\n\n\t\t\toffset = file.length;\n\n\t\t}\n\n\t\treturn fflate.zipSync( files, { level: 0 } );\n\n\t}\n\n}\n\nfunction imageToCanvas( image, color ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\tconst scale = 1024 / Math.max( image.width, image.height );\n\n\t\tconst canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = image.width * Math.min( 1, scale );\n\t\tcanvas.height = image.height * Math.min( 1, scale );\n\n\t\tconst context = canvas.getContext( '2d' );\n\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\tif ( color !== undefined ) {\n\n\t\t\tconst hex = parseInt( color, 16 );\n\n\t\t\tconst r = ( hex >> 16 & 255 ) / 255;\n\t\t\tconst g = ( hex >> 8 & 255 ) / 255;\n\t\t\tconst b = ( hex & 255 ) / 255;\n\n\t\t\tconst imagedata = context.getImageData( 0, 0, canvas.width, canvas.height );\n\t\t\tconst data = imagedata.data;\n\n\t\t\tfor ( let i = 0; i < data.length; i += 4 ) {\n\n\t\t\t\tdata[ i + 0 ] = data[ i + 0 ] * r;\n\t\t\t\tdata[ i + 1 ] = data[ i + 1 ] * g;\n\t\t\t\tdata[ i + 2 ] = data[ i + 2 ] * b;\n\n\t\t\t}\n\n\t\t\tcontext.putImageData( imagedata, 0, 0 );\n\n\t\t}\n\n\t\treturn canvas;\n\n\t}\n\n}\n\n//\n\nconst PRECISION = 7;\n\nfunction buildHeader() {\n\n\treturn `#usda 1.0\n(\n    customLayerData = {\n        string creator = \"Three.js USDZExporter\"\n    }\n    metersPerUnit = 1\n    upAxis = \"Y\"\n)\n\n`;\n\n}\n\nfunction buildUSDFileAsString( dataToInsert ) {\n\n\tlet output = buildHeader();\n\toutput += dataToInsert;\n\treturn fflate.strToU8( output );\n\n}\n\n// Xform\n\nfunction buildXform( object, geometry, material ) {\n\n\tconst name = 'Object_' + object.id;\n\tconst transform = buildMatrix( object.matrixWorld );\n\n\tif ( object.matrixWorld.determinant() < 0 ) {\n\n\t\tconsole.warn( 'THREE.USDZExporter: USDZ does not support negative scales', object );\n\n\t}\n\n\treturn `def Xform \"${ name }\" (\n    prepend references = @./geometries/Geometry_${ geometry.id }.usd@</Geometry>\n)\n{\n    matrix4d xformOp:transform = ${ transform }\n    uniform token[] xformOpOrder = [\"xformOp:transform\"]\n\n    rel material:binding = </Materials/Material_${ material.id }>\n}\n\n`;\n\n}\n\nfunction buildMatrix( matrix ) {\n\n\tconst array = matrix.elements;\n\n\treturn `( ${ buildMatrixRow( array, 0 ) }, ${ buildMatrixRow( array, 4 ) }, ${ buildMatrixRow( array, 8 ) }, ${ buildMatrixRow( array, 12 ) } )`;\n\n}\n\nfunction buildMatrixRow( array, offset ) {\n\n\treturn `(${ array[ offset + 0 ] }, ${ array[ offset + 1 ] }, ${ array[ offset + 2 ] }, ${ array[ offset + 3 ] })`;\n\n}\n\n// Mesh\n\nfunction buildMeshObject( geometry ) {\n\n\tconst mesh = buildMesh( geometry );\n\treturn `\ndef \"Geometry\"\n{\n  ${mesh}\n}\n`;\n\n}\n\nfunction buildMesh( geometry ) {\n\n\tconst name = 'Geometry';\n\tconst attributes = geometry.attributes;\n\tconst count = attributes.position.count;\n\n\treturn `\n    def Mesh \"${ name }\"\n    {\n        int[] faceVertexCounts = [${ buildMeshVertexCount( geometry ) }]\n        int[] faceVertexIndices = [${ buildMeshVertexIndices( geometry ) }]\n        normal3f[] normals = [${ buildVector3Array( attributes.normal, count )}] (\n            interpolation = \"vertex\"\n        )\n        point3f[] points = [${ buildVector3Array( attributes.position, count )}]\n        float2[] primvars:st = [${ buildVector2Array( attributes.uv, count )}] (\n            interpolation = \"vertex\"\n        )\n        uniform token subdivisionScheme = \"none\"\n    }\n`;\n\n}\n\nfunction buildMeshVertexCount( geometry ) {\n\n\tconst count = geometry.index !== null ? geometry.index.count : geometry.attributes.position.count;\n\n\treturn Array( count / 3 ).fill( 3 ).join( ', ' );\n\n}\n\nfunction buildMeshVertexIndices( geometry ) {\n\n\tconst index = geometry.index;\n\tconst array = [];\n\n\tif ( index !== null ) {\n\n\t\tfor ( let i = 0; i < index.count; i ++ ) {\n\n\t\t\tarray.push( index.getX( i ) );\n\n\t\t}\n\n\t} else {\n\n\t\tconst length = geometry.attributes.position.count;\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tarray.push( i );\n\n\t\t}\n\n\t}\n\n\treturn array.join( ', ' );\n\n}\n\nfunction buildVector3Array( attribute, count ) {\n\n\tif ( attribute === undefined ) {\n\n\t\tconsole.warn( 'USDZExporter: Normals missing.' );\n\t\treturn Array( count ).fill( '(0, 0, 0)' ).join( ', ' );\n\n\t}\n\n\tconst array = [];\n\n\tfor ( let i = 0; i < attribute.count; i ++ ) {\n\n\t\tconst x = attribute.getX( i );\n\t\tconst y = attribute.getY( i );\n\t\tconst z = attribute.getZ( i );\n\n\t\tarray.push( `(${ x.toPrecision( PRECISION ) }, ${ y.toPrecision( PRECISION ) }, ${ z.toPrecision( PRECISION ) })` );\n\n\t}\n\n\treturn array.join( ', ' );\n\n}\n\nfunction buildVector2Array( attribute, count ) {\n\n\tif ( attribute === undefined ) {\n\n\t\tconsole.warn( 'USDZExporter: UVs missing.' );\n\t\treturn Array( count ).fill( '(0, 0)' ).join( ', ' );\n\n\t}\n\n\tconst array = [];\n\n\tfor ( let i = 0; i < attribute.count; i ++ ) {\n\n\t\tconst x = attribute.getX( i );\n\t\tconst y = attribute.getY( i );\n\n\t\tarray.push( `(${ x.toPrecision( PRECISION ) }, ${ 1 - y.toPrecision( PRECISION ) })` );\n\n\t}\n\n\treturn array.join( ', ' );\n\n}\n\n// Materials\n\nfunction buildMaterials( materials, textures ) {\n\n\tconst array = [];\n\n\tfor ( const uuid in materials ) {\n\n\t\tconst material = materials[ uuid ];\n\n\t\tarray.push( buildMaterial( material, textures ) );\n\n\t}\n\n\treturn `def \"Materials\"\n{\n${ array.join( '' ) }\n}\n\n`;\n\n}\n\nfunction buildMaterial( material, textures ) {\n\n\t// https://graphics.pixar.com/usd/docs/UsdPreviewSurface-Proposal.html\n\n\tconst pad = '            ';\n\tconst inputs = [];\n\tconst samplers = [];\n\n\tfunction buildTexture( texture, mapType, color ) {\n\n\t\tconst id = texture.id + ( color ? '_' + color.getHexString() : '' );\n\t\tconst isRGBA = texture.format === 1023;\n\n\t\ttextures[ id ] = texture;\n\n\t\treturn `\n        def Shader \"Transform2d_${ mapType }\" (\n            sdrMetadata = {\n                string role = \"math\"\n            }\n        )\n        {\n            uniform token info:id = \"UsdTransform2d\"\n            float2 inputs:in.connect = </Materials/Material_${ material.id }/uvReader_st.outputs:result>\n            float2 inputs:scale = ${ buildVector2( texture.repeat ) }\n            float2 inputs:translation = ${ buildVector2( texture.offset ) }\n            float2 outputs:result\n        }\n\n        def Shader \"Texture_${ texture.id }_${ mapType }\"\n        {\n            uniform token info:id = \"UsdUVTexture\"\n            asset inputs:file = @textures/Texture_${ id }.${ isRGBA ? 'png' : 'jpg' }@\n            float2 inputs:st.connect = </Materials/Material_${ material.id }/Transform2d_${ mapType }.outputs:result>\n            token inputs:wrapS = \"repeat\"\n            token inputs:wrapT = \"repeat\"\n            float outputs:r\n            float outputs:g\n            float outputs:b\n            float3 outputs:rgb\n            ${ material.transparent || material.alphaTest > 0.0 ? 'float outputs:a' : '' }\n        }`;\n\n\t}\n\n\n\tif ( material.side === DoubleSide ) {\n\n\t\tconsole.warn( 'THREE.USDZExporter: USDZ does not support double sided materials', material );\n\n\t}\n\n\tif ( material.map !== null ) {\n\n\t\tinputs.push( `${ pad }color3f inputs:diffuseColor.connect = </Materials/Material_${ material.id }/Texture_${ material.map.id }_diffuse.outputs:rgb>` );\n\n\t\tif ( material.transparent ) {\n\n\t\t\tinputs.push( `${ pad }float inputs:opacity.connect = </Materials/Material_${ material.id }/Texture_${ material.map.id }_diffuse.outputs:a>` );\n\n\t\t} else if ( material.alphaTest > 0.0 ) {\n\n\t\t\tinputs.push( `${ pad }float inputs:opacity.connect = </Materials/Material_${ material.id }/Texture_${ material.map.id }_diffuse.outputs:a>` );\n\t\t\tinputs.push( `${ pad }float inputs:opacityThreshold = ${material.alphaTest}` );\n\n\t\t}\n\n\t\tsamplers.push( buildTexture( material.map, 'diffuse', material.color ) );\n\n\t} else {\n\n\t\tinputs.push( `${ pad }color3f inputs:diffuseColor = ${ buildColor( material.color ) }` );\n\n\t}\n\n\tif ( material.emissiveMap !== null ) {\n\n\t\tinputs.push( `${ pad }color3f inputs:emissiveColor.connect = </Materials/Material_${ material.id }/Texture_${ material.emissiveMap.id }_emissive.outputs:rgb>` );\n\n\t\tsamplers.push( buildTexture( material.emissiveMap, 'emissive' ) );\n\n\t} else if ( material.emissive.getHex() > 0 ) {\n\n\t\tinputs.push( `${ pad }color3f inputs:emissiveColor = ${ buildColor( material.emissive ) }` );\n\n\t}\n\n\tif ( material.normalMap !== null ) {\n\n\t\tinputs.push( `${ pad }normal3f inputs:normal.connect = </Materials/Material_${ material.id }/Texture_${ material.normalMap.id }_normal.outputs:rgb>` );\n\n\t\tsamplers.push( buildTexture( material.normalMap, 'normal' ) );\n\n\t}\n\n\tif ( material.aoMap !== null ) {\n\n\t\tinputs.push( `${ pad }float inputs:occlusion.connect = </Materials/Material_${ material.id }/Texture_${ material.aoMap.id }_occlusion.outputs:r>` );\n\n\t\tsamplers.push( buildTexture( material.aoMap, 'occlusion' ) );\n\n\t}\n\n\tif ( material.roughnessMap !== null && material.roughness === 1 ) {\n\n\t\tinputs.push( `${ pad }float inputs:roughness.connect = </Materials/Material_${ material.id }/Texture_${ material.roughnessMap.id }_roughness.outputs:g>` );\n\n\t\tsamplers.push( buildTexture( material.roughnessMap, 'roughness' ) );\n\n\t} else {\n\n\t\tinputs.push( `${ pad }float inputs:roughness = ${ material.roughness }` );\n\n\t}\n\n\tif ( material.metalnessMap !== null && material.metalness === 1 ) {\n\n\t\tinputs.push( `${ pad }float inputs:metallic.connect = </Materials/Material_${ material.id }/Texture_${ material.metalnessMap.id }_metallic.outputs:b>` );\n\n\t\tsamplers.push( buildTexture( material.metalnessMap, 'metallic' ) );\n\n\t} else {\n\n\t\tinputs.push( `${ pad }float inputs:metallic = ${ material.metalness }` );\n\n\t}\n\n\tif ( material.alphaMap !== null ) {\n\n\t\tinputs.push( `${pad}float inputs:opacity.connect = </Materials/Material_${material.id}/Texture_${material.alphaMap.id}_opacity.outputs:r>` );\n\t\tinputs.push( `${pad}float inputs:opacityThreshold = 0.0001` );\n\n\t\tsamplers.push( buildTexture( material.alphaMap, 'opacity' ) );\n\n\t} else {\n\n\t\tinputs.push( `${pad}float inputs:opacity = ${material.opacity}` );\n\n\t}\n\n\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\tinputs.push( `${ pad }float inputs:clearcoat = ${ material.clearcoat }` );\n\t\tinputs.push( `${ pad }float inputs:clearcoatRoughness = ${ material.clearcoatRoughness }` );\n\t\tinputs.push( `${ pad }float inputs:ior = ${ material.ior }` );\n\n\t}\n\n\treturn `\n    def Material \"Material_${ material.id }\"\n    {\n        def Shader \"PreviewSurface\"\n        {\n            uniform token info:id = \"UsdPreviewSurface\"\n${ inputs.join( '\\n' ) }\n            int inputs:useSpecularWorkflow = 0\n            token outputs:surface\n        }\n\n        token outputs:surface.connect = </Materials/Material_${ material.id }/PreviewSurface.outputs:surface>\n        token inputs:frame:stPrimvarName = \"st\"\n\n        def Shader \"uvReader_st\"\n        {\n            uniform token info:id = \"UsdPrimvarReader_float2\"\n            token inputs:varname.connect = </Materials/Material_${ material.id }.inputs:frame:stPrimvarName>\n            float2 inputs:fallback = (0.0, 0.0)\n            float2 outputs:result\n        }\n\n${ samplers.join( '\\n' ) }\n\n    }\n`;\n\n}\n\nfunction buildColor( color ) {\n\n\treturn `(${ color.r }, ${ color.g }, ${ color.b })`;\n\n}\n\nfunction buildVector2( vector ) {\n\n\treturn `(${ vector.x }, ${ vector.y })`;\n\n}\n\n\nfunction buildCamera( camera ) {\n\n\tconst name = camera.name ? camera.name : 'Camera_' + camera.id;\n\n\tconst transform = buildMatrix( camera.matrixWorld );\n\n\tif ( camera.matrixWorld.determinant() < 0 ) {\n\n\t\tconsole.warn( 'THREE.USDZExporter: USDZ does not support negative scales', camera );\n\n\t}\n\n\tif (camera.isOrthographicCamera) {\n\t\treturn `def Camera \"${name}\"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${ transform }\n\t\t\tuniform token[] xformOpOrder = [\"xformOp:transform\"]\n\t\n\t\t\tfloat2 clippingRange = (${camera.near}, ${camera.far})\n\t\t\tfloat horizontalAperture = ${(Math.abs(camera.left) + Math.abs(camera.right)) * 10}\n\t\t\tfloat verticalAperture = ${(Math.abs(camera.top) + Math.abs(camera.bottom)) * 10}\n\t\t\ttoken projection = \"orthographic\"\n\t\t}\n\t\n\t`;\n\t} else {\n\t\treturn `def Camera \"${name}\"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${ transform }\n\t\t\tuniform token[] xformOpOrder = [\"xformOp:transform\"]\n\t\n\t\t\tfloat2 clippingRange = (${camera.near}, ${camera.far})\n\t\t\tfloat focalLength = ${camera.getFocalLength()}\n\t\t\tfloat focusDistance = ${camera.focus}\n\t\t\tfloat horizontalAperture = ${camera.getFilmWidth()}\n\t\t\ttoken projection = \"perspective\"\n\t\t\tfloat verticalAperture = ${camera.getFilmHeight()}\n\t\t}\n\t\n\t`;\n\t}\n\n}\n\nexport { USDZExporter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}