{"ast":null,"code":"import _taggedTemplateLiteral from \"C:/Misc/Documents/Career/FinTech/BlockChain/FrontEnd/buildspace-dao-starter/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\nimport { PaperWallet } from '@thirdweb-dev/wallets';\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { useCreateWalletInstance, useSetConnectionStatus, useSetConnectedWallet, useWalletContext, useConnectionStatus } from '@thirdweb-dev/react-core';\nimport { E as fadeInAnimation, A as Input, f as fontSize, s as spacing, o as media, C as Container, B as Button, i as iconSize, S as Spacer, T as TextDivider, M as ModalHeader, b as Text, c as Spinner, L as Line, a as ModalTitle, r as reservedScreens, W as WalletEntryButton } from './formElements-49d2196e.browser.esm.js';\nimport { jsxs, jsx, Fragment } from 'react/jsx-runtime';\nimport { I as InputSelectionUI } from './InputSelectionUI-6fc61f90.browser.esm.js';\nimport { u as useScreenContext } from './useWalletConnect-8a1a7bf9.browser.esm.js';\nimport { e as emailIcon } from './Tooltip-c0cbeb52.browser.esm.js';\nconst GoogleIcon = props => {\n  return /*#__PURE__*/jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: props.size,\n    viewBox: \"0 0 24 24\",\n    width: props.size,\n    children: [/*#__PURE__*/jsx(\"path\", {\n      d: \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\",\n      fill: \"#4285F4\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\",\n      fill: \"#34A853\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\",\n      fill: \"#FBBC05\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\",\n      fill: \"#EA4335\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M1 1h22v22H1z\",\n      fill: \"none\"\n    })]\n  });\n};\nfunction openGoogleSignInWindow() {\n  const win = window.open(\"\", undefined, \"width=350, height=500\");\n  if (win) {\n    win.document.title = \"Sign In - Google Accounts\";\n    win.document.body.innerHTML = spinnerWindowHtml;\n  }\n  return win;\n}\nconst spinnerWindowHtml = \"\\n<svg class=\\\"loader\\\" viewBox=\\\"0 0 50 50\\\">\\n  <circle\\n    cx=\\\"25\\\"\\n    cy=\\\"25\\\"\\n    r=\\\"20\\\"\\n    fill=\\\"none\\\"\\n    stroke=\\\"#000\\\"\\n    stroke-width=\\\"4\\\"\\n  />\\n</svg>\\n\\n<style>\\n  body,\\n  html {\\n    height: 100%;\\n    margin: 0;\\n    padding: 0;\\n  }\\n\\n  body {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n  }\\n\\n  .loader {\\n    width: 15vw;\\n    height: 15vw;\\n    animation: spin 2s linear infinite;\\n  }\\n\\n  .loader circle {\\n    animation: loading 1.5s linear infinite;\\n  }\\n\\n  @keyframes loading {\\n    0% {\\n      stroke-dasharray: 1, 150;\\n      stroke-dashoffset: 0;\\n    }\\n    50% {\\n      stroke-dasharray: 90, 150;\\n      stroke-dashoffset: -35;\\n    }\\n    100% {\\n      stroke-dasharray: 90, 150;\\n      stroke-dashoffset: -124;\\n    }\\n  }\\n\\n  @keyframes spin {\\n    100% {\\n      transform: rotate(360deg);\\n    }\\n  }\\n</style>\\n\";\nconst FadeIn = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  animation: \", \" 0.15s ease-in;\\n\"])), fadeInAnimation);\nfunction OTPInput(props) {\n  const otp = props.value.split(\"\").map(Number);\n  const setOTP = newOTP => {\n    props.setValue(newOTP.join(\"\"));\n  };\n  const inputToFocusIndex = otp.length;\n  const boxEls = useRef([]);\n  useEffect(() => {\n    if (boxEls.current[inputToFocusIndex]) {\n      requestAnimationFrame(() => {\n        var _boxEls$current$input;\n        (_boxEls$current$input = boxEls.current[inputToFocusIndex]) === null || _boxEls$current$input === void 0 || _boxEls$current$input.focus();\n      });\n    }\n  }, [inputToFocusIndex]);\n  return /*#__PURE__*/jsx(Container, {\n    center: \"x\",\n    gap: \"sm\",\n    flex: \"row\",\n    children: new Array(props.digits).fill(null).map((_, i) => {\n      return /*#__PURE__*/jsx(OTPInputBox, {\n        \"data-error\": props.isInvalid,\n        ref: e => boxEls.current[i] = e,\n        value: otp[i] === undefined ? \"\" : otp[i],\n        type: \"number\",\n        variant: \"outline\",\n        onPaste: e => {\n          const pastedData = e.clipboardData.getData(\"text/plain\");\n          const newOTP = pastedData.slice(0, props.digits).split(\"\").filter(n => /[0-9]/.test(n)).map(Number);\n          setOTP(newOTP);\n          e.preventDefault();\n        },\n        onKeyDown: e => {\n          if (e.key === \"Enter\") {\n            if (props.onEnter) {\n              props.onEnter();\n              return;\n            }\n          }\n          if (e.key === \"ArrowLeft\") {\n            var _boxEls$current;\n            if (i === 0) {\n              return;\n            }\n            (_boxEls$current = boxEls.current[i - 1]) === null || _boxEls$current === void 0 || _boxEls$current.focus();\n            return;\n          }\n          if (e.key === \"ArrowRight\") {\n            var _boxEls$current2;\n            if (i === props.digits - 1) {\n              return;\n            }\n            (_boxEls$current2 = boxEls.current[i + 1]) === null || _boxEls$current2 === void 0 || _boxEls$current2.focus();\n            return;\n          }\n          if (e.key === \"e\" || e.key === \".\") {\n            e.preventDefault();\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            if (i === 0) {\n              return;\n            }\n            const newOTP = otp.slice(0, -1);\n            setOTP(newOTP);\n          }\n        },\n        onChange: e => {\n          let value = e.target.value;\n          if (value.length > 1) {\n            const lastValue = value[value.length - 1];\n            if (lastValue) {\n              value = lastValue;\n            }\n          }\n          if (!/[0-9]/.test(value) && value !== \"\") {\n            e.preventDefault();\n            return;\n          }\n          const newOTP = [...otp];\n          const index = i > inputToFocusIndex - 1 ? inputToFocusIndex : i;\n          newOTP[index] = Number(value);\n          setOTP(newOTP);\n        }\n      }, i);\n    })\n  });\n}\nconst OTPInputBox = styled(Input)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  appearance: none;\\n  -webkit-appearance: none;\\n  width: 40px;\\n  height: 40px;\\n  text-align: center;\\n  font-size: \", \";\\n  padding: \", \";\\n  \", \" {\\n    width: 35px;\\n    height: 35px;\\n  }\\n  &[data-verify-status=\\\"invalid\\\"] {\\n    color: \", \";\\n    border-color: \", \";\\n  }\\n\"])), fontSize.md, spacing.xs, media.mobile, p => p.theme.colors.danger, p => p.theme.colors.danger);\nconst PaperFormUI = props => {\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  return /*#__PURE__*/jsxs(\"div\", {\n    children: [props.googleLoginSupported && /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsxs(SocialButton, {\n        variant: \"secondary\",\n        fullWidth: true,\n        onClick: () => {\n          googleLogin();\n          props.onSelect({\n            google: true\n          });\n        },\n        children: [/*#__PURE__*/jsx(GoogleIcon, {\n          size: iconSize.md\n        }), \"Sign in with Google\"]\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      }), /*#__PURE__*/jsx(TextDivider, {\n        children: /*#__PURE__*/jsx(\"span\", {\n          children: \"OR\"\n        })\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      })]\n    }), /*#__PURE__*/jsx(InputSelectionUI, {\n      onSelect: email => props.onSelect({\n        email\n      }),\n      placeholder: \"Enter your email address\",\n      name: \"email\",\n      type: \"email\",\n      errorMessage: _input => {\n        const input = _input.replace(/\\+/g, \"\");\n        const emailRegex = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,})$/g;\n        const isValidEmail = emailRegex.test(input);\n        if (!isValidEmail) {\n          return \"Invalid email address\";\n        }\n      },\n      emptyErrorMessage: \"email address is required\",\n      showOrSeparator: props.showOrSeparator\n    })]\n  });\n};\nconst PaperFormUIScreen = props => {\n  const isCompact = props.modalSize === \"compact\";\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    p: \"lg\",\n    animate: \"fadein\",\n    style: {\n      minHeight: \"250px\"\n    },\n    children: [/*#__PURE__*/jsx(ModalHeader, {\n      onBack: props.onBack,\n      title: \"Sign in\"\n    }), isCompact ? /*#__PURE__*/jsx(Spacer, {\n      y: \"xl\"\n    }) : null, /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      p: isCompact ? undefined : \"lg\",\n      children: /*#__PURE__*/jsx(PaperFormUI, {\n        walletConfig: props.walletConfig,\n        googleLoginSupported: props.googleLoginSupported,\n        onSelect: props.onSelect,\n        showOrSeparator: false\n      })\n    })]\n  });\n};\nconst SocialButton = styled(Button)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  gap: \", \";\\n\"])), spacing.sm);\nconst PaperOTPLoginUI = props => {\n  const email = props.selectionData;\n  const [otpInput, setOtpInput] = useState(\"\");\n  const [recoveryCode, setRecoveryCode] = useState(\"\");\n  const {\n    createWalletInstance,\n    setConnectedWallet,\n    setConnectionStatus\n  } = useWalletContext();\n  const [wallet, setWallet] = useState(null);\n  const isWideModal = props.modalSize === \"wide\";\n  const [verifyStatus, setVerifyStatus] = useState(\"idle\");\n  const [sendEmailStatus, setSendEmailStatus] = useState(\"sending\");\n  const recoveryCodeRequired = !!(typeof sendEmailStatus !== \"string\" && sendEmailStatus.recoveryShareManagement !== \"AWS_MANAGED\" && sendEmailStatus.isNewDevice && !sendEmailStatus.isNewUser);\n  const sendEmail = useCallback(async () => {\n    setOtpInput(\"\");\n    setVerifyStatus(\"idle\");\n    setSendEmailStatus(\"sending\");\n    try {\n      const _wallet = createWalletInstance(props.walletConfig);\n      setWallet(_wallet);\n      const _paperSDK = await _wallet.getPaperSDK();\n      const {\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      } = await _paperSDK.auth.sendPaperEmailLoginOtp({\n        email: email\n      });\n      setSendEmailStatus({\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      });\n    } catch (e) {\n      console.error(e);\n      setVerifyStatus(\"idle\");\n      setSendEmailStatus(\"error\");\n    }\n  }, [createWalletInstance, email, props.walletConfig]);\n  const handleSubmit = otp => {\n    if (recoveryCodeRequired && !recoveryCode) {\n      return;\n    }\n    if (typeof sendEmailStatus === \"string\" || otp.length !== 6) {\n      return;\n    }\n    verifyCodes(otp);\n  };\n  const verifyCodes = async otp => {\n    setVerifyStatus(\"idle\");\n    if (!wallet) {\n      return;\n    }\n    try {\n      setVerifyStatus(\"verifying\");\n      setConnectionStatus(\"connecting\");\n      await wallet.connect({\n        email,\n        otp,\n        recoveryCode: recoveryCodeRequired ? recoveryCode : undefined\n      });\n      setConnectedWallet(wallet);\n      setVerifyStatus(\"valid\");\n      props.close();\n    } catch (e) {\n      setVerifyStatus(\"invalid\");\n      console.error(e);\n    }\n  };\n\n  // send email on mount\n  const emailSentOnMount = useRef(false);\n  useEffect(() => {\n    if (!emailSentOnMount.current) {\n      emailSentOnMount.current = true;\n      sendEmail();\n    }\n  }, [sendEmail]);\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    animate: \"fadein\",\n    children: [/*#__PURE__*/jsx(Container, {\n      p: \"lg\",\n      children: /*#__PURE__*/jsx(ModalHeader, {\n        title: \"Sign in\",\n        onBack: props.goBack\n      })\n    }), /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      children: /*#__PURE__*/jsxs(\"form\", {\n        onSubmit: e => {\n          e.preventDefault();\n        },\n        children: [/*#__PURE__*/jsxs(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [!isWideModal && /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Text, {\n            children: \"Enter the OTP sent to\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: email\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          })]\n        }), /*#__PURE__*/jsx(OTPInput, {\n          isInvalid: verifyStatus === \"invalid\",\n          digits: 6,\n          value: otpInput,\n          setValue: value => {\n            setOtpInput(value);\n            setVerifyStatus(\"idle\"); // reset error\n            if (!recoveryCodeRequired) {\n              handleSubmit(value);\n            }\n          },\n          onEnter: () => {\n            handleSubmit(otpInput);\n          }\n        }), recoveryCodeRequired && /*#__PURE__*/jsxs(Container, {\n          px: \"lg\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: \"New device detected\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            multiline: true,\n            style: {\n              maxWidth: \"350px\"\n            },\n            children: [\"Enter the recovery code emailed to you \", /*#__PURE__*/jsx(\"br\", {}), \" when you first signed up\"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Input, {\n            sm: true,\n            autoComplete: \"off\",\n            required: true,\n            \"data-error\": verifyStatus === \"invalid\",\n            id: \"recovery-code\",\n            variant: \"outline\",\n            style: {\n              textAlign: \"center\"\n            },\n            value: recoveryCode,\n            onChange: e => setRecoveryCode(e.target.value),\n            placeholder: \"Enter your recovery code\"\n          })]\n        }), verifyStatus === \"invalid\" && /*#__PURE__*/jsxs(FadeIn, {\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"md\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            color: \"danger\",\n            center: true,\n            children: [\"Invalid OTP \", recoveryCodeRequired ? \"or recovery code\" : \"\"]\n          })]\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), /*#__PURE__*/jsx(Container, {\n          px: isWideModal ? \"xxl\" : \"lg\",\n          children: verifyStatus === \"verifying\" ? /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Container, {\n              flex: \"row\",\n              center: \"x\",\n              animate: \"fadein\",\n              children: /*#__PURE__*/jsx(Spinner, {\n                size: \"lg\",\n                color: \"accentText\"\n              })\n            })\n          }) : /*#__PURE__*/jsx(Container, {\n            animate: \"fadein\",\n            children: /*#__PURE__*/jsx(Button, {\n              onClick: () => handleSubmit(otpInput),\n              variant: \"accent\",\n              type: \"submit\",\n              style: {\n                width: \"100%\"\n              },\n              children: \"Verify\"\n            })\n          }, \"btn-container\")\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), !isWideModal && /*#__PURE__*/jsx(Line, {}), /*#__PURE__*/jsxs(Container, {\n          p: isWideModal ? undefined : \"lg\",\n          children: [sendEmailStatus === \"error\" && /*#__PURE__*/jsxs(Fragment, {\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              center: true,\n              color: \"danger\",\n              children: \"Failed to send OTP\"\n            }), /*#__PURE__*/jsx(Spacer, {\n              y: \"md\"\n            })]\n          }), sendEmailStatus === \"sending\" && /*#__PURE__*/jsxs(Container, {\n            flex: \"row\",\n            center: \"both\",\n            gap: \"xs\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              children: \"Sending OTP\"\n            }), /*#__PURE__*/jsx(Spinner, {\n              size: \"xs\",\n              color: \"secondaryText\"\n            })]\n          }), typeof sendEmailStatus !== \"string\" && /*#__PURE__*/jsx(LinkButton, {\n            onClick: sendEmail,\n            type: \"button\",\n            children: \"Resend OTP\"\n          })]\n        })]\n      })\n    })]\n  });\n};\nconst LinkButton = styled.button(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  all: unset;\\n  color: \", \";\\n  font-size: \", \";\\n  cursor: pointer;\\n  text-align: center;\\n  width: 100%;\\n  &:hover {\\n    color: \", \";\\n  }\\n\"])), p => p.theme.colors.accentText, fontSize.sm, p => p.theme.colors.primaryText);\nconst PaperGoogleLogin = props => {\n  const {\n    goBack,\n    modalSize\n  } = props;\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const connectionStatus = useConnectionStatus();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n      props.close();\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  const closeModal = props.close;\n  useEffect(() => {\n    if (connectionStatus === \"connected\") {\n      closeModal();\n    }\n  }, [connectionStatus, closeModal]);\n  return /*#__PURE__*/jsx(Container, {\n    animate: \"fadein\",\n    flex: \"column\",\n    fullHeight: true,\n    children: /*#__PURE__*/jsxs(Container, {\n      flex: \"column\",\n      expand: true,\n      p: \"lg\",\n      style: {\n        paddingBottom: 0\n      },\n      children: [/*#__PURE__*/jsx(ModalHeader, {\n        title: /*#__PURE__*/jsxs(Container, {\n          flex: \"row\",\n          center: \"both\",\n          gap: \"xs\",\n          children: [/*#__PURE__*/jsx(GoogleIcon, {\n            size: iconSize.md\n          }), /*#__PURE__*/jsx(ModalTitle, {\n            children: \" Sign in \"\n          })]\n        }),\n        onBack: goBack\n      }), modalSize === \"compact\" ? /*#__PURE__*/jsx(Spacer, {\n        y: \"xl\"\n      }) : null, /*#__PURE__*/jsxs(Container, {\n        flex: \"column\",\n        center: \"both\",\n        expand: true,\n        style: {\n          textAlign: \"center\",\n          minHeight: \"250px\"\n        },\n        children: [connectionStatus === \"connecting\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            multiline: true,\n            style: {\n              maxWidth: \"250px\"\n            },\n            children: \"Select your Google account in the pop-up\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          }), /*#__PURE__*/jsx(Container, {\n            center: \"x\",\n            flex: \"row\",\n            children: /*#__PURE__*/jsx(Spinner, {\n              size: \"lg\",\n              color: \"accentText\"\n            })\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        }), connectionStatus === \"disconnected\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"danger\",\n            children: \"Failed to sign in\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsxs(Button, {\n            variant: \"primary\",\n            onClick: googleLogin,\n            children: [\" \", \"Retry\", \" \"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        })]\n      })]\n    })\n  });\n};\nconst paperWallet = config => {\n  const defaultRecovery = \"AWS_MANAGED\";\n  return {\n    category: \"socialLogin\",\n    id: PaperWallet.id,\n    recommended: config === null || config === void 0 ? void 0 : config.recommended,\n    meta: {\n      ...PaperWallet.meta,\n      name: \"Email\",\n      iconURL: emailIcon\n    },\n    create(options) {\n      return new PaperWallet({\n        ...options,\n        ...config,\n        advancedOptions: {\n          recoveryShareManagement: \"AWS_MANAGED\",\n          ...(config === null || config === void 0 ? void 0 : config.advancedOptions)\n        }\n      });\n    },\n    selectUI(props) {\n      var _config$advancedOptio;\n      return /*#__PURE__*/jsx(PaperSelectionUI, {\n        ...props,\n        recoveryShareManagement: (config === null || config === void 0 || (_config$advancedOptio = config.advancedOptions) === null || _config$advancedOptio === void 0 ? void 0 : _config$advancedOptio.recoveryShareManagement) || defaultRecovery\n      });\n    },\n    connectUI(props) {\n      var _config$advancedOptio2;\n      return /*#__PURE__*/jsx(PaperConnectUI, {\n        ...props,\n        recoveryShareManagement: (config === null || config === void 0 || (_config$advancedOptio2 = config.advancedOptions) === null || _config$advancedOptio2 === void 0 ? void 0 : _config$advancedOptio2.recoveryShareManagement) || defaultRecovery\n      });\n    }\n  };\n};\nconst PaperSelectionUI = props => {\n  const screen = useScreenContext();\n\n  // show the icon + text if\n  // wide -\n  // compact + not main screen (safe/smart wallet list screen)\n  if (props.modalSize === \"wide\" || screen !== reservedScreens.main && props.modalSize === \"compact\") {\n    return /*#__PURE__*/jsx(WalletEntryButton, {\n      walletConfig: props.walletConfig,\n      selectWallet: () => {\n        props.onSelect(undefined);\n      }\n    });\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    children: /*#__PURE__*/jsx(PaperFormUI, {\n      walletConfig: props.walletConfig,\n      googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n      showOrSeparator: props.supportedWallets.length > 1,\n      onSelect: props.onSelect\n    })\n  });\n};\nconst PaperConnectUI = props => {\n  const [loginType, setLoginType] = useState(props.selectionData);\n  if (loginType) {\n    const handleBack = () => {\n      // go back to base screen\n      if (props.modalSize === \"wide\") {\n        setLoginType(undefined);\n      }\n\n      // go to main screen\n      else {\n        props.goBack();\n      }\n    };\n    if (\"email\" in loginType) {\n      return /*#__PURE__*/jsx(PaperOTPLoginUI, {\n        ...props,\n        recoveryShareManagement: props.recoveryShareManagement,\n        selectionData: loginType.email,\n        goBack: handleBack\n      });\n    }\n\n    // google\n    else {\n      return /*#__PURE__*/jsx(PaperGoogleLogin, {\n        ...props,\n        goBack: handleBack\n      });\n    }\n  }\n  return /*#__PURE__*/jsx(PaperFormUIScreen, {\n    walletConfig: props.walletConfig,\n    googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n    modalSize: props.modalSize,\n    onSelect: _loginType => {\n      setLoginType(_loginType);\n    },\n    onBack: props.goBack\n  });\n};\nvar paperWallet$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  paperWallet: paperWallet\n});\nexport { FadeIn as F, GoogleIcon as G, OTPInput as O, paperWallet$1 as a, openGoogleSignInWindow as o, paperWallet as p };","map":{"version":3,"names":["PaperWallet","useRef","useEffect","useState","useCallback","styled","useCreateWalletInstance","useSetConnectionStatus","useSetConnectedWallet","useWalletContext","useConnectionStatus","E","fadeInAnimation","A","Input","f","fontSize","s","spacing","o","media","C","Container","B","Button","i","iconSize","S","Spacer","T","TextDivider","M","ModalHeader","b","Text","c","Spinner","L","Line","a","ModalTitle","r","reservedScreens","W","WalletEntryButton","jsxs","jsx","Fragment","I","InputSelectionUI","u","useScreenContext","e","emailIcon","GoogleIcon","props","xmlns","height","size","viewBox","width","children","d","fill","openGoogleSignInWindow","win","window","open","undefined","document","title","body","innerHTML","spinnerWindowHtml","FadeIn","div","_templateObject","_taggedTemplateLiteral","OTPInput","otp","value","split","map","Number","setOTP","newOTP","setValue","join","inputToFocusIndex","length","boxEls","current","requestAnimationFrame","_boxEls$current$input","focus","center","gap","flex","Array","digits","_","OTPInputBox","isInvalid","ref","type","variant","onPaste","pastedData","clipboardData","getData","slice","filter","n","test","preventDefault","onKeyDown","key","onEnter","_boxEls$current","_boxEls$current2","onChange","target","lastValue","index","_templateObject2","md","xs","mobile","p","theme","colors","danger","PaperFormUI","createWalletInstance","setConnectionStatus","setConnectedWallet","googleLogin","paperWallet","walletConfig","googleWindow","Error","connect","openedWindow","closeOpenedWindow","close","console","error","googleLoginSupported","SocialButton","fullWidth","onClick","onSelect","google","y","email","placeholder","name","errorMessage","_input","input","replace","emailRegex","isValidEmail","emptyErrorMessage","showOrSeparator","PaperFormUIScreen","isCompact","modalSize","fullHeight","animate","style","minHeight","onBack","expand","_templateObject3","sm","PaperOTPLoginUI","selectionData","otpInput","setOtpInput","recoveryCode","setRecoveryCode","wallet","setWallet","isWideModal","verifyStatus","setVerifyStatus","sendEmailStatus","setSendEmailStatus","recoveryCodeRequired","recoveryShareManagement","isNewDevice","isNewUser","sendEmail","_wallet","_paperSDK","getPaperSDK","auth","sendPaperEmailLoginOtp","handleSubmit","verifyCodes","emailSentOnMount","goBack","onSubmit","textAlign","color","px","multiline","maxWidth","autoComplete","required","id","LinkButton","button","_templateObject4","accentText","primaryText","PaperGoogleLogin","connectionStatus","closeModal","paddingBottom","config","defaultRecovery","category","recommended","meta","iconURL","create","options","advancedOptions","selectUI","_config$advancedOptio","PaperSelectionUI","connectUI","_config$advancedOptio2","PaperConnectUI","screen","main","selectWallet","supportedWallets","loginType","setLoginType","handleBack","_loginType","paperWallet$1","Object","freeze","__proto__","F","G","O"],"sources":["C:/Misc/Documents/Career/FinTech/BlockChain/FrontEnd/buildspace-dao-starter/node_modules/@thirdweb-dev/react/dist/paperWallet-968c4544.browser.esm.js"],"sourcesContent":["import { PaperWallet } from '@thirdweb-dev/wallets';\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { useCreateWalletInstance, useSetConnectionStatus, useSetConnectedWallet, useWalletContext, useConnectionStatus } from '@thirdweb-dev/react-core';\nimport { E as fadeInAnimation, A as Input, f as fontSize, s as spacing, o as media, C as Container, B as Button, i as iconSize, S as Spacer, T as TextDivider, M as ModalHeader, b as Text, c as Spinner, L as Line, a as ModalTitle, r as reservedScreens, W as WalletEntryButton } from './formElements-49d2196e.browser.esm.js';\nimport { jsxs, jsx, Fragment } from 'react/jsx-runtime';\nimport { I as InputSelectionUI } from './InputSelectionUI-6fc61f90.browser.esm.js';\nimport { u as useScreenContext } from './useWalletConnect-8a1a7bf9.browser.esm.js';\nimport { e as emailIcon } from './Tooltip-c0cbeb52.browser.esm.js';\n\nconst GoogleIcon = props => {\n  return /*#__PURE__*/jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: props.size,\n    viewBox: \"0 0 24 24\",\n    width: props.size,\n    children: [/*#__PURE__*/jsx(\"path\", {\n      d: \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\",\n      fill: \"#4285F4\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\",\n      fill: \"#34A853\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\",\n      fill: \"#FBBC05\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\",\n      fill: \"#EA4335\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M1 1h22v22H1z\",\n      fill: \"none\"\n    })]\n  });\n};\n\nfunction openGoogleSignInWindow() {\n  const win = window.open(\"\", undefined, \"width=350, height=500\");\n  if (win) {\n    win.document.title = \"Sign In - Google Accounts\";\n    win.document.body.innerHTML = spinnerWindowHtml;\n  }\n  return win;\n}\nconst spinnerWindowHtml = `\n<svg class=\"loader\" viewBox=\"0 0 50 50\">\n  <circle\n    cx=\"25\"\n    cy=\"25\"\n    r=\"20\"\n    fill=\"none\"\n    stroke=\"#000\"\n    stroke-width=\"4\"\n  />\n</svg>\n\n<style>\n  body,\n  html {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .loader {\n    width: 15vw;\n    height: 15vw;\n    animation: spin 2s linear infinite;\n  }\n\n  .loader circle {\n    animation: loading 1.5s linear infinite;\n  }\n\n  @keyframes loading {\n    0% {\n      stroke-dasharray: 1, 150;\n      stroke-dashoffset: 0;\n    }\n    50% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -35;\n    }\n    100% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -124;\n    }\n  }\n\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n</style>\n`;\n\nconst FadeIn = styled.div`\n  animation: ${fadeInAnimation} 0.15s ease-in;\n`;\n\nfunction OTPInput(props) {\n  const otp = props.value.split(\"\").map(Number);\n  const setOTP = newOTP => {\n    props.setValue(newOTP.join(\"\"));\n  };\n  const inputToFocusIndex = otp.length;\n  const boxEls = useRef([]);\n  useEffect(() => {\n    if (boxEls.current[inputToFocusIndex]) {\n      requestAnimationFrame(() => {\n        boxEls.current[inputToFocusIndex]?.focus();\n      });\n    }\n  }, [inputToFocusIndex]);\n  return /*#__PURE__*/jsx(Container, {\n    center: \"x\",\n    gap: \"sm\",\n    flex: \"row\",\n    children: new Array(props.digits).fill(null).map((_, i) => {\n      return /*#__PURE__*/jsx(OTPInputBox, {\n        \"data-error\": props.isInvalid,\n        ref: e => boxEls.current[i] = e,\n        value: otp[i] === undefined ? \"\" : otp[i],\n        type: \"number\",\n        variant: \"outline\",\n        onPaste: e => {\n          const pastedData = e.clipboardData.getData(\"text/plain\");\n          const newOTP = pastedData.slice(0, props.digits).split(\"\").filter(n => /[0-9]/.test(n)).map(Number);\n          setOTP(newOTP);\n          e.preventDefault();\n        },\n        onKeyDown: e => {\n          if (e.key === \"Enter\") {\n            if (props.onEnter) {\n              props.onEnter();\n              return;\n            }\n          }\n          if (e.key === \"ArrowLeft\") {\n            if (i === 0) {\n              return;\n            }\n            boxEls.current[i - 1]?.focus();\n            return;\n          }\n          if (e.key === \"ArrowRight\") {\n            if (i === props.digits - 1) {\n              return;\n            }\n            boxEls.current[i + 1]?.focus();\n            return;\n          }\n          if (e.key === \"e\" || e.key === \".\") {\n            e.preventDefault();\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            if (i === 0) {\n              return;\n            }\n            const newOTP = otp.slice(0, -1);\n            setOTP(newOTP);\n          }\n        },\n        onChange: e => {\n          let value = e.target.value;\n          if (value.length > 1) {\n            const lastValue = value[value.length - 1];\n            if (lastValue) {\n              value = lastValue;\n            }\n          }\n          if (!/[0-9]/.test(value) && value !== \"\") {\n            e.preventDefault();\n            return;\n          }\n          const newOTP = [...otp];\n          const index = i > inputToFocusIndex - 1 ? inputToFocusIndex : i;\n          newOTP[index] = Number(value);\n          setOTP(newOTP);\n        }\n      }, i);\n    })\n  });\n}\nconst OTPInputBox = styled(Input)`\n  appearance: none;\n  -webkit-appearance: none;\n  width: 40px;\n  height: 40px;\n  text-align: center;\n  font-size: ${fontSize.md};\n  padding: ${spacing.xs};\n  ${media.mobile} {\n    width: 35px;\n    height: 35px;\n  }\n  &[data-verify-status=\"invalid\"] {\n    color: ${p => p.theme.colors.danger};\n    border-color: ${p => p.theme.colors.danger};\n  }\n`;\n\nconst PaperFormUI = props => {\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  return /*#__PURE__*/jsxs(\"div\", {\n    children: [props.googleLoginSupported && /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsxs(SocialButton, {\n        variant: \"secondary\",\n        fullWidth: true,\n        onClick: () => {\n          googleLogin();\n          props.onSelect({\n            google: true\n          });\n        },\n        children: [/*#__PURE__*/jsx(GoogleIcon, {\n          size: iconSize.md\n        }), \"Sign in with Google\"]\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      }), /*#__PURE__*/jsx(TextDivider, {\n        children: /*#__PURE__*/jsx(\"span\", {\n          children: \"OR\"\n        })\n      }), /*#__PURE__*/jsx(Spacer, {\n        y: \"lg\"\n      })]\n    }), /*#__PURE__*/jsx(InputSelectionUI, {\n      onSelect: email => props.onSelect({\n        email\n      }),\n      placeholder: \"Enter your email address\",\n      name: \"email\",\n      type: \"email\",\n      errorMessage: _input => {\n        const input = _input.replace(/\\+/g, \"\");\n        const emailRegex = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,})$/g;\n        const isValidEmail = emailRegex.test(input);\n        if (!isValidEmail) {\n          return \"Invalid email address\";\n        }\n      },\n      emptyErrorMessage: \"email address is required\",\n      showOrSeparator: props.showOrSeparator\n    })]\n  });\n};\nconst PaperFormUIScreen = props => {\n  const isCompact = props.modalSize === \"compact\";\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    p: \"lg\",\n    animate: \"fadein\",\n    style: {\n      minHeight: \"250px\"\n    },\n    children: [/*#__PURE__*/jsx(ModalHeader, {\n      onBack: props.onBack,\n      title: \"Sign in\"\n    }), isCompact ? /*#__PURE__*/jsx(Spacer, {\n      y: \"xl\"\n    }) : null, /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      p: isCompact ? undefined : \"lg\",\n      children: /*#__PURE__*/jsx(PaperFormUI, {\n        walletConfig: props.walletConfig,\n        googleLoginSupported: props.googleLoginSupported,\n        onSelect: props.onSelect,\n        showOrSeparator: false\n      })\n    })]\n  });\n};\nconst SocialButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  gap: ${spacing.sm};\n`;\n\nconst PaperOTPLoginUI = props => {\n  const email = props.selectionData;\n  const [otpInput, setOtpInput] = useState(\"\");\n  const [recoveryCode, setRecoveryCode] = useState(\"\");\n  const {\n    createWalletInstance,\n    setConnectedWallet,\n    setConnectionStatus\n  } = useWalletContext();\n  const [wallet, setWallet] = useState(null);\n  const isWideModal = props.modalSize === \"wide\";\n  const [verifyStatus, setVerifyStatus] = useState(\"idle\");\n  const [sendEmailStatus, setSendEmailStatus] = useState(\"sending\");\n  const recoveryCodeRequired = !!(typeof sendEmailStatus !== \"string\" && sendEmailStatus.recoveryShareManagement !== \"AWS_MANAGED\" && sendEmailStatus.isNewDevice && !sendEmailStatus.isNewUser);\n  const sendEmail = useCallback(async () => {\n    setOtpInput(\"\");\n    setVerifyStatus(\"idle\");\n    setSendEmailStatus(\"sending\");\n    try {\n      const _wallet = createWalletInstance(props.walletConfig);\n      setWallet(_wallet);\n      const _paperSDK = await _wallet.getPaperSDK();\n      const {\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      } = await _paperSDK.auth.sendPaperEmailLoginOtp({\n        email: email\n      });\n      setSendEmailStatus({\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      });\n    } catch (e) {\n      console.error(e);\n      setVerifyStatus(\"idle\");\n      setSendEmailStatus(\"error\");\n    }\n  }, [createWalletInstance, email, props.walletConfig]);\n  const handleSubmit = otp => {\n    if (recoveryCodeRequired && !recoveryCode) {\n      return;\n    }\n    if (typeof sendEmailStatus === \"string\" || otp.length !== 6) {\n      return;\n    }\n    verifyCodes(otp);\n  };\n  const verifyCodes = async otp => {\n    setVerifyStatus(\"idle\");\n    if (!wallet) {\n      return;\n    }\n    try {\n      setVerifyStatus(\"verifying\");\n      setConnectionStatus(\"connecting\");\n      await wallet.connect({\n        email,\n        otp,\n        recoveryCode: recoveryCodeRequired ? recoveryCode : undefined\n      });\n      setConnectedWallet(wallet);\n      setVerifyStatus(\"valid\");\n      props.close();\n    } catch (e) {\n      setVerifyStatus(\"invalid\");\n      console.error(e);\n    }\n  };\n\n  // send email on mount\n  const emailSentOnMount = useRef(false);\n  useEffect(() => {\n    if (!emailSentOnMount.current) {\n      emailSentOnMount.current = true;\n      sendEmail();\n    }\n  }, [sendEmail]);\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    animate: \"fadein\",\n    children: [/*#__PURE__*/jsx(Container, {\n      p: \"lg\",\n      children: /*#__PURE__*/jsx(ModalHeader, {\n        title: \"Sign in\",\n        onBack: props.goBack\n      })\n    }), /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      children: /*#__PURE__*/jsxs(\"form\", {\n        onSubmit: e => {\n          e.preventDefault();\n        },\n        children: [/*#__PURE__*/jsxs(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [!isWideModal && /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Text, {\n            children: \"Enter the OTP sent to\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: email\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          })]\n        }), /*#__PURE__*/jsx(OTPInput, {\n          isInvalid: verifyStatus === \"invalid\",\n          digits: 6,\n          value: otpInput,\n          setValue: value => {\n            setOtpInput(value);\n            setVerifyStatus(\"idle\"); // reset error\n            if (!recoveryCodeRequired) {\n              handleSubmit(value);\n            }\n          },\n          onEnter: () => {\n            handleSubmit(otpInput);\n          }\n        }), recoveryCodeRequired && /*#__PURE__*/jsxs(Container, {\n          px: \"lg\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: \"New device detected\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            multiline: true,\n            style: {\n              maxWidth: \"350px\"\n            },\n            children: [\"Enter the recovery code emailed to you \", /*#__PURE__*/jsx(\"br\", {}), \" when you first signed up\"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Input, {\n            sm: true,\n            autoComplete: \"off\",\n            required: true,\n            \"data-error\": verifyStatus === \"invalid\",\n            id: \"recovery-code\",\n            variant: \"outline\",\n            style: {\n              textAlign: \"center\"\n            },\n            value: recoveryCode,\n            onChange: e => setRecoveryCode(e.target.value),\n            placeholder: \"Enter your recovery code\"\n          })]\n        }), verifyStatus === \"invalid\" && /*#__PURE__*/jsxs(FadeIn, {\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"md\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            color: \"danger\",\n            center: true,\n            children: [\"Invalid OTP \", recoveryCodeRequired ? \"or recovery code\" : \"\"]\n          })]\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), /*#__PURE__*/jsx(Container, {\n          px: isWideModal ? \"xxl\" : \"lg\",\n          children: verifyStatus === \"verifying\" ? /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Container, {\n              flex: \"row\",\n              center: \"x\",\n              animate: \"fadein\",\n              children: /*#__PURE__*/jsx(Spinner, {\n                size: \"lg\",\n                color: \"accentText\"\n              })\n            })\n          }) : /*#__PURE__*/jsx(Container, {\n            animate: \"fadein\",\n            children: /*#__PURE__*/jsx(Button, {\n              onClick: () => handleSubmit(otpInput),\n              variant: \"accent\",\n              type: \"submit\",\n              style: {\n                width: \"100%\"\n              },\n              children: \"Verify\"\n            })\n          }, \"btn-container\")\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: recoveryCodeRequired ? \"xl\" : \"xxl\"\n        }), !isWideModal && /*#__PURE__*/jsx(Line, {}), /*#__PURE__*/jsxs(Container, {\n          p: isWideModal ? undefined : \"lg\",\n          children: [sendEmailStatus === \"error\" && /*#__PURE__*/jsxs(Fragment, {\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              center: true,\n              color: \"danger\",\n              children: \"Failed to send OTP\"\n            }), /*#__PURE__*/jsx(Spacer, {\n              y: \"md\"\n            })]\n          }), sendEmailStatus === \"sending\" && /*#__PURE__*/jsxs(Container, {\n            flex: \"row\",\n            center: \"both\",\n            gap: \"xs\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              children: \"Sending OTP\"\n            }), /*#__PURE__*/jsx(Spinner, {\n              size: \"xs\",\n              color: \"secondaryText\"\n            })]\n          }), typeof sendEmailStatus !== \"string\" && /*#__PURE__*/jsx(LinkButton, {\n            onClick: sendEmail,\n            type: \"button\",\n            children: \"Resend OTP\"\n          })]\n        })]\n      })\n    })]\n  });\n};\nconst LinkButton = styled.button`\n  all: unset;\n  color: ${p => p.theme.colors.accentText};\n  font-size: ${fontSize.sm};\n  cursor: pointer;\n  text-align: center;\n  width: 100%;\n  &:hover {\n    color: ${p => p.theme.colors.primaryText};\n  }\n`;\n\nconst PaperGoogleLogin = props => {\n  const {\n    goBack,\n    modalSize\n  } = props;\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const connectionStatus = useConnectionStatus();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow();\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n      props.close();\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  const closeModal = props.close;\n  useEffect(() => {\n    if (connectionStatus === \"connected\") {\n      closeModal();\n    }\n  }, [connectionStatus, closeModal]);\n  return /*#__PURE__*/jsx(Container, {\n    animate: \"fadein\",\n    flex: \"column\",\n    fullHeight: true,\n    children: /*#__PURE__*/jsxs(Container, {\n      flex: \"column\",\n      expand: true,\n      p: \"lg\",\n      style: {\n        paddingBottom: 0\n      },\n      children: [/*#__PURE__*/jsx(ModalHeader, {\n        title: /*#__PURE__*/jsxs(Container, {\n          flex: \"row\",\n          center: \"both\",\n          gap: \"xs\",\n          children: [/*#__PURE__*/jsx(GoogleIcon, {\n            size: iconSize.md\n          }), /*#__PURE__*/jsx(ModalTitle, {\n            children: \" Sign in \"\n          })]\n        }),\n        onBack: goBack\n      }), modalSize === \"compact\" ? /*#__PURE__*/jsx(Spacer, {\n        y: \"xl\"\n      }) : null, /*#__PURE__*/jsxs(Container, {\n        flex: \"column\",\n        center: \"both\",\n        expand: true,\n        style: {\n          textAlign: \"center\",\n          minHeight: \"250px\"\n        },\n        children: [connectionStatus === \"connecting\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            multiline: true,\n            style: {\n              maxWidth: \"250px\"\n            },\n            children: \"Select your Google account in the pop-up\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          }), /*#__PURE__*/jsx(Container, {\n            center: \"x\",\n            flex: \"row\",\n            children: /*#__PURE__*/jsx(Spinner, {\n              size: \"lg\",\n              color: \"accentText\"\n            })\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        }), connectionStatus === \"disconnected\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"danger\",\n            children: \"Failed to sign in\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsxs(Button, {\n            variant: \"primary\",\n            onClick: googleLogin,\n            children: [\" \", \"Retry\", \" \"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nconst paperWallet = config => {\n  const defaultRecovery = \"AWS_MANAGED\";\n  return {\n    category: \"socialLogin\",\n    id: PaperWallet.id,\n    recommended: config?.recommended,\n    meta: {\n      ...PaperWallet.meta,\n      name: \"Email\",\n      iconURL: emailIcon\n    },\n    create(options) {\n      return new PaperWallet({\n        ...options,\n        ...config,\n        advancedOptions: {\n          recoveryShareManagement: \"AWS_MANAGED\",\n          ...config?.advancedOptions\n        }\n      });\n    },\n    selectUI(props) {\n      return /*#__PURE__*/jsx(PaperSelectionUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    },\n    connectUI(props) {\n      return /*#__PURE__*/jsx(PaperConnectUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    }\n  };\n};\nconst PaperSelectionUI = props => {\n  const screen = useScreenContext();\n\n  // show the icon + text if\n  // wide -\n  // compact + not main screen (safe/smart wallet list screen)\n  if (props.modalSize === \"wide\" || screen !== reservedScreens.main && props.modalSize === \"compact\") {\n    return /*#__PURE__*/jsx(WalletEntryButton, {\n      walletConfig: props.walletConfig,\n      selectWallet: () => {\n        props.onSelect(undefined);\n      }\n    });\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    children: /*#__PURE__*/jsx(PaperFormUI, {\n      walletConfig: props.walletConfig,\n      googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n      showOrSeparator: props.supportedWallets.length > 1,\n      onSelect: props.onSelect\n    })\n  });\n};\nconst PaperConnectUI = props => {\n  const [loginType, setLoginType] = useState(props.selectionData);\n  if (loginType) {\n    const handleBack = () => {\n      // go back to base screen\n      if (props.modalSize === \"wide\") {\n        setLoginType(undefined);\n      }\n\n      // go to main screen\n      else {\n        props.goBack();\n      }\n    };\n    if (\"email\" in loginType) {\n      return /*#__PURE__*/jsx(PaperOTPLoginUI, {\n        ...props,\n        recoveryShareManagement: props.recoveryShareManagement,\n        selectionData: loginType.email,\n        goBack: handleBack\n      });\n    }\n\n    // google\n    else {\n      return /*#__PURE__*/jsx(PaperGoogleLogin, {\n        ...props,\n        goBack: handleBack\n      });\n    }\n  }\n  return /*#__PURE__*/jsx(PaperFormUIScreen, {\n    walletConfig: props.walletConfig,\n    googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n    modalSize: props.modalSize,\n    onSelect: _loginType => {\n      setLoginType(_loginType);\n    },\n    onBack: props.goBack\n  });\n};\n\nvar paperWallet$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  paperWallet: paperWallet\n});\n\nexport { FadeIn as F, GoogleIcon as G, OTPInput as O, paperWallet$1 as a, openGoogleSignInWindow as o, paperWallet as p };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}